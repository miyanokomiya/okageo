import{__assign as t}from"tslib";var e=1e-6;function r(t,e){return{x:t.x+e.x,y:t.y+e.y}}function a(t,e){return{x:t.x-e.x,y:t.y-e.y}}function n(t,e){return{x:t.x*e,y:t.y*e}}function i(t,r){var n=a(t,r);return Math.abs(n.x)<e&&Math.abs(n.y)<e}function l(t,e){var r=a(t,e);return Math.sqrt(r.x*r.x+r.y*r.y)}function o(t){return l(t,{x:0,y:0})}function s(t){return o(t)<e}function u(t,e){return t.x*e.y-t.y*e.x}function c(t,e){return t.x*e.x+t.y*e.y}function f(e){return e.map(function(e){return t({},e)})}function h(t,e){return n(r(t,e),.5)}function y(t,e){void 0===e&&(e={x:0,y:0});var r=a(t,e);return Math.atan2(r.y,r.x)}function p(t,e){return void 0===e&&(e={x:0,y:0}),r(n(a(e,t),2),t)}function x(t,e,n){void 0===n&&(n={x:0,y:0});var i=a(t,n);return r({x:Math.cos(e)*i.x-Math.sin(e)*i.y,y:Math.sin(e)*i.x+Math.cos(e)*i.y},n)}function g(t,e,r){if(0===t)return 0===e?[]:[-r/e];var a=e*e-4*t*r;if(a<0)return[];var n=.5/t;if(0===a)return[-e*n];var i=Math.sqrt(a);return[(-e+i)*n,(-e-i)*n]}function v(t,e){if(2!==e.length)throw new Error("line must be length = 2");var i=e[0],l=a(e[1],i);return r(i,n(l,c(l,a(t,i))/c(l,l)))}function b(t,e){var r=d(t,e),a=r.ta,n=r.tb;return r.tc*r.td<0&&a*n<0}function m(t,e){var r=d(t,e),a=r.ta,n=r.tb;return r.tc*r.td<=0&&a*n<=0}function d(t,e){var r=t[0].x,a=t[0].y,n=t[1].x,i=t[1].y,l=e[0].x,o=e[0].y,s=e[1].x,u=e[1].y;return{ta:(l-s)*(a-o)+(o-u)*(l-r),tb:(l-s)*(i-o)+(o-u)*(l-n),tc:(r-n)*(o-a)+(a-i)*(r-l),td:(r-n)*(u-a)+(a-i)*(r-s)}}function S(t,r){var a=u(t,r);return Math.abs(a)<e}function k(t,e){return s(a(t,v(t,e)))}function F(t,e){if(!s(a(t,v(t,e))))return!1;var r=a(e[1],e[0]),n=a(t,e[0]);return!(c(r,n)<0)&&!(o(r)<o(n))}function M(t,e){if(e.find(function(e){return t.x===e.x&&t.y===e.y}))return!0;for(var o=e.map(function(t,r){return[t,r<e.length-1?e[r+1]:e[0]]}).filter(function(t){return!i(t[0],t[1])}),s=0;s<o.length;s++){var u=o[s];if(F(t,u))return!0}var c=o.reduce(function(t,e){return t+l(e[0],e[1])},0),f={x:1,y:0},h=0;for(s=0;s<o.length;s++){if(!S(a((u=o[s])[0],u[1]),f)&&!e.find(function(e){return k(t,[e,r(t,f)])}))break;if(f={x:10*Math.random(),y:10*Math.random()},s=-1,++h>100)throw new Error("cannot calc")}var y=[t,r(t,n(f,2*c))];return o.filter(function(e){var r=Math.max(e[0].x,e[1].x),a=Math.max(e[0].y,e[1].y);return!(r<t.x)&&(!(a<t.y)&&m(e,y))}).length%2==1}function A(e,r){if(S(a(e[0],e[1]),a(r[0],r[1])))return null;if(k(e[0],r))return t({},e[0]);if(k(e[1],r))return t({},e[1]);var n=((r[1].x-r[0].x)*(e[0].y-r[0].y)-(r[1].y-r[0].y)*(e[0].x-r[0].x))/2,i=n/(n+((r[1].x-r[0].x)*(r[0].y-e[1].y)-(r[1].y-r[0].y)*(r[0].x-e[1].x))/2);return 0<i&&i<1?{x:e[0].x+(e[1].x-e[0].x)*i,y:e[0].y+(e[1].y-e[0].y)*i}:null}function z(t,e){return!(!i(t[0],e[0])||!i(t[1],e[1]))||!(!i(t[0],e[1])||!i(t[1],e[0]))}function w(t,e){var r=t.length,a=t[e],n=t[(e+1)%r],i=t[e-1<0?r-1:e-1],l=[a,n,i],o=!1;return t.some(function(t){return t!==a&&t!==n&&t!==i&&E(l,t)&&(o=!0),o}),o?null:l}function E(t,e){var r=a(t[1],t[0]),n=a(t[2],t[1]),i=a(t[0],t[2]),l=a(e,t[0]),o=a(e,t[1]),s=a(e,t[2]),c=u(r,o),f=u(n,s),h=u(i,l);return c>=0&&f>=0&&h>=0||c<=0&&f<=0&&h<=0}function P(t){var e=t.concat();return-1===C(t)&&e.reverse(),e}function C(t){var e=I(t,!0);return e>0?1:e<0?-1:0}function I(t,e){if(void 0===e&&(e=!1),t.length<3)return 0;for(var r=0,a=t.length,n=0;n<a-1;n++)r+=(t[n].x-t[n+1].x)*(t[n].y+t[n+1].y);return r+=(t[a-1].x-t[0].x)*(t[a-1].y+t[0].y),r/=2,e||(r=Math.abs(r)),r}function T(t,e){var r=[],a=1/e;if(3===t.length)for(var i=0;i<=e;i++){var l=a*i,o=n(t[0],(1-l)*(1-l)),s=n(t[1],2*l*(1-l)),u=n(t[2],l*l);r.push({x:o.x+s.x+u.x,y:o.y+s.y+u.y})}else{if(4!==t.length)throw new Error("connot approximate");for(i=0;i<=e;i++){l=a*i,o=n(t[0],(1-l)*(1-l)*(1-l)),s=n(t[1],3*l*(1-l)*(1-l)),u=n(t[2],3*l*l*(1-l));var c=n(t[3],l*l*l);r.push({x:o.x+s.x+u.x+c.x,y:o.y+s.y+u.y+c.y})}}return r}function G(t,e,a,n,i,l,o){for(var s=[],u=(n-a)/o,c=0;c<=o;c++){var f=u*c+a-l;s.push(r(x({x:t*Math.cos(f),y:e*Math.sin(f)},l),i))}return s}function L(t,e,r,a,n,i,l,o){if(t*e==0)return[r,a];var s=D(r,a,t=Math.abs(t),e=Math.abs(e),l),u=s.centers;t*=s.radiusRate,e*=s.radiusRate;var c=null,f=0,h=0,y=O(r,t,c=n&&i||!n&&!i?C([r,a,u[0]])<0?u[0]:u[1]:C([r,a,u[0]])>0?u[0]:u[1],l),p=O(a,t,c,l);return i?y>p?(f=y-2*Math.PI,h=p):(f=y,h=p):y>p?(f=y,h=p):(f=y,h=p-2*Math.PI),G(t,e,f,h,c,l,o)}function O(t,e,r,a){t=x(t,-a,r);var n=Math.acos((t.x-r.x)/e);return t.y-r.y<0&&(n=-n+2*Math.PI),n+=a,n%=2*Math.PI}function D(t,e,r,a,n){t=x(t,-n),e=x(e,-n);var i=N({x:t.x/r,y:t.y/a},{x:e.x/r,y:e.y/a},1),l=i.centers,o={x:l[0].x*r,y:l[0].y*a},s={x:l[1].x*r,y:l[1].y*a};return{centers:[o=x(o,n),s=x(s,n)],radiusRate:i.radiusRate}}function N(t,e,r){var a=(t.x+e.x)/2,n=(t.x-e.x)/2,i=(t.y+e.y)/2,l=(t.y-e.y)/2,o=Math.sqrt(n*n+l*l),s=Math.pow(r/o,2)-1;if(s<0){var u=h(t,e);return{centers:[u,u],radiusRate:o/r}}var c=Math.sqrt(s);return{centers:[{x:a+l*c,y:i-n*c},{x:a-l*c,y:i+n*c}],radiusRate:1}}function R(t,e){var r=e[0],a=e[1],n=e[2],i=e[3],l=e[4],o=e[5];return t.map(function(t){return{x:r*t.x+n*t.y+l,y:a*t.x+i*t.y+o}})}function q(t){for(var e=t.concat(),r=t.length,a=0;a<r;a++){if(i(e[a],e[(a+1)%r])){e.splice(a,1),e=q(e);break}}return e}var W={bezierSplitSize:10,ellipseSplitSize:20};function B(t){for(var e=[],r=t.getElementsByTagName("path"),a=0;a<r.length;a++){var n=r[a];e.push({d:V(n),style:tt(n)})}var i=t.getElementsByTagName("rect");for(a=0;a<i.length;a++){n=i[a];e.push({d:Z(n),style:tt(n)})}var l=t.getElementsByTagName("ellipse");for(a=0;a<l.length;a++){n=l[a];e.push({d:H(n),style:tt(n)})}var o=t.getElementsByTagName("circle");for(a=0;a<o.length;a++){n=o[a];e.push({d:Q(n),style:tt(n)})}return e}function J(t){var e=t.type;return"x1"in t&&(e+=" "+t.x1),"y1"in t&&(e+=" "+t.y1),"x2"in t&&(e+=" "+t.x2),"y2"in t&&(e+=" "+t.y2),"x3"in t&&(e+=" "+t.x3),"y3"in t&&(e+=" "+t.y3),"x"in t&&(e+=" "+t.x),"y"in t&&(e+=" "+t.y),e}function j(t){var e=[],r=$(t),a={x:0,y:0},n={x:0,y:0};return r.forEach(function(t){var r=[],i=null,l=null;switch(t[0]){case"M":case"L":r.push({x:parseFloat(t[1]),y:parseFloat(t[2])});break;case"m":case"l":r.push({x:a.x+parseFloat(t[1]),y:a.y+parseFloat(t[2])});break;case"H":r.push({x:parseFloat(t[1]),y:a.y});break;case"V":r.push({x:a.x,y:parseFloat(t[1])});break;case"h":r.push({x:a.x+parseFloat(t[1]),y:a.y});break;case"v":r.push({x:a.x,y:a.y+parseFloat(t[1])});break;case"Q":(r=T([i=a,l={x:parseFloat(t[1]),y:parseFloat(t[2])},{x:parseFloat(t[3]),y:parseFloat(t[4])}],W.bezierSplitSize)).shift();break;case"q":(r=T([i=a,l={x:i.x+parseFloat(t[1]),y:i.y+parseFloat(t[2])},{x:i.x+parseFloat(t[3]),y:i.y+parseFloat(t[4])}],W.bezierSplitSize)).shift();break;case"T":(r=T([i=a,l=p(i,n),{x:parseFloat(t[1]),y:parseFloat(t[2])}],W.bezierSplitSize)).shift();break;case"t":(r=T([i=a,l=p(i,n),{x:i.x+parseFloat(t[1]),y:i.y+parseFloat(t[2])}],W.bezierSplitSize)).shift();break;case"C":(r=T([i=a,l={x:parseFloat(t[1]),y:parseFloat(t[2])},{x:parseFloat(t[3]),y:parseFloat(t[4])},{x:parseFloat(t[5]),y:parseFloat(t[6])}],W.bezierSplitSize)).shift();break;case"c":(r=T([i=a,l={x:i.x+parseFloat(t[1]),y:i.y+parseFloat(t[2])},{x:i.x+parseFloat(t[3]),y:i.y+parseFloat(t[4])},{x:i.x+parseFloat(t[5]),y:i.y+parseFloat(t[6])}],W.bezierSplitSize)).shift();break;case"S":(r=T([i=a,l=p(i,n),{x:parseFloat(t[1]),y:parseFloat(t[2])},{x:parseFloat(t[3]),y:parseFloat(t[4])}],W.bezierSplitSize)).shift();break;case"s":(r=T([i=a,l=p(i,n),{x:i.x+parseFloat(t[1]),y:i.y+parseFloat(t[2])},{x:i.x+parseFloat(t[3]),y:i.y+parseFloat(t[4])}],W.bezierSplitSize)).shift();break;case"A":i=a,l={x:parseFloat(t[6]),y:parseFloat(t[7])},(r=L(parseFloat(t[1]),parseFloat(t[2]),i,l,!!parseInt(t[4],10),!!parseInt(t[5],10),parseFloat(t[3])/180*Math.PI,W.bezierSplitSize)).shift();break;case"a":l={x:(i=a).x+parseFloat(t[6]),y:i.y+parseFloat(t[7])},(r=L(parseFloat(t[1]),parseFloat(t[2]),i,l,!!parseInt(t[4],10),!!parseInt(t[5],10),parseFloat(t[3])/180*Math.PI,W.bezierSplitSize)).shift()}r.length>0&&(a=r[r.length-1],e=e.concat(r),r.length>1&&(n=r[r.length-2]))}),e}function V(t){var e=t.getAttribute("d");return e?U(t.getAttribute("transform"),j(e)):[]}function Z(t){var e=[],r=parseFloat(t.getAttribute("x")||"0"),a=parseFloat(t.getAttribute("y")||"0"),n=parseFloat(t.getAttribute("width")||"0"),i=parseFloat(t.getAttribute("height")||"0");return e.push({x:r,y:a}),e.push({x:r+n,y:a}),e.push({x:r+n,y:a+i}),e.push({x:r,y:a+i}),e=U(t.getAttribute("transform"),e)}function H(t){var e=[],r=parseFloat(t.getAttribute("cx")||"0"),a=parseFloat(t.getAttribute("cy")||"0");return e=G(parseFloat(t.getAttribute("rx")||"1"),parseFloat(t.getAttribute("ry")||"1"),0,2*Math.PI,{x:r,y:a},0,W.ellipseSplitSize),e=U(t.getAttribute("transform"),e)}function Q(t){var e=[],r=parseFloat(t.getAttribute("cx")||"0"),a=parseFloat(t.getAttribute("cy")||"0"),n=parseFloat(t.getAttribute("r")||"1");return e=G(n,n,0,2*Math.PI,{x:r,y:a},0,W.ellipseSplitSize),e=U(t.getAttribute("transform"),e)}function U(t,e){if(!t)return e;var r=f(e);return t.split(/\)/).forEach(function(t){var e=t.split(/\(/);if(2===e.length){var a=e[0],n=[];switch(e[1].split(/,/).forEach(function(t){return n.push(parseFloat(t))}),a.trim().toLowerCase()){case"matrix":r=R(r,n);break;case"translate":r=r.map(function(t){return{x:t.x+n[0],y:t.y+n[1]}});break;case"scale":var i=n[0],l=n[0];n.length>1&&(l=n[1]),r=r.map(function(t){return{x:t.x*i,y:t.y*l}});break;case"rotate":var o={x:0,y:0};n.length>2&&(o={x:n[1],y:n[2]}),r=r.map(function(t){return x(t,n[0]*Math.PI/180,o)});break;case"skewx":r=r.map(function(t){return{x:t.x+Math.tan(n[0]*Math.PI/180)*t.y,y:t.y}});break;case"skewy":r=r.map(function(t){return{x:t.x,y:t.y+Math.tan(n[0]*Math.PI/180)*t.x}})}}}),r}function $(t){for(var e=/M|m|L|l|H|h|V|v|C|c|S|s|Q|q|T|t|A|a|Z|z/g,r=t.replace(e," $& ").replace(/([^e])(-\d*)/g,"$1 $2 ").split(/,| /).filter(function(t){return t}),a="M",n=[],i=0;i<r.length;){var l=[];if(r[i].match(e)?(l[0]=r[i].trim(),a=l[0],i++):l[0]=a,l[0].match(/Z|z/));else if(l[0].match(/V|v|H|h/))l=l.concat(r.slice(i,i+1)),i+=1;else if(l[0].match(/M|m|L|l|T|t/))l=l.concat(r.slice(i,i+2)),i+=2;else if(l[0].match(/Q|q|S|s/))l=l.concat(r.slice(i,i+4)),i+=4;else if(l[0].match(/C|c/))l=l.concat(r.slice(i,i+6)),i+=6;else{if(!l[0].match(/A|a/))break;l=l.concat(r.slice(i,i+7)),i+=7}n.push(l)}return n}function X(t){var e=document.createElementNS("http://www.w3.org/2000/svg","svg"),r=1,a=1;return t.forEach(function(t){e.appendChild(K(t.d,t.style)),t.d.forEach(function(t){r=Math.max(r,t.x),a=Math.max(a,t.y)})}),r*=1.1,a*=1.1,e.setAttribute("width",""+r),e.setAttribute("height",""+a),e}function K(t,e){var r=document.createElementNS("http://www.w3.org/2000/svg","path");return r.setAttribute("d",Y(t)),r.setAttribute("style",et(e)),r}function Y(t){var e="";return t.forEach(function(r,a){0===a?e+="M "+r.x+","+r.y:(e+=" L "+r.x+","+r.y,a===t.length-1&&(e+=" Z"))}),e}function _(){return{fill:!1,fillGlobalAlpha:1,fillStyle:"",lineCap:"butt",lineDash:[],lineJoin:"bevel",lineWidth:1,stroke:!1,strokeGlobalAlpha:1,strokeStyle:""}}function tt(t){var e={fill:!1,fillGlobalAlpha:1,fillStyle:"",lineCap:"butt",lineDash:[],lineJoin:"bevel",lineWidth:1,stroke:!1,strokeGlobalAlpha:1,strokeStyle:""},r={},a=t.getAttributeNode("style");a?a.value.split(";").forEach(function(t){var e=t.split(":");2===e.length&&(r[e[0].trim()]=e[1].trim())}):t.getAttributeNames().forEach(function(e){var a=t.getAttributeNode(e);a&&(r[a.name]=a.value)});return Object.keys(r).forEach(function(t){t=t.toLowerCase();var a=r[t];if("fill"===t)"none"===a?(e.fillStyle="",e.fill=!1):(e.fillStyle=a,e.fill=!0);else if("stroke"===t)"none"===a?(e.strokeStyle="",e.stroke=!1):(e.strokeStyle=a,e.stroke=!0);else if("stroke-width"===t)e.lineWidth=parseFloat(a);else if("stroke-opacity"===t)e.strokeGlobalAlpha=parseFloat(a);else if("fill-opacity"===t)e.fillGlobalAlpha=parseFloat(a);else if("stroke-linecap"===t)e.lineCap=a;else if("stroke-linejoin"===t)e.lineJoin=a;else if("stroke-dasharray"===t)if("none"===a.toLowerCase())e.lineDash=[];else{var n=a.split(",");e.lineDash=[],n.forEach(function(t){e.lineDash.push(parseFloat(t))})}}),e}function et(t){var e="";return t.fill?e+="fill:"+t.fillStyle+";":e+="fill:none;",t.fillGlobalAlpha&&(e+="fill-opacity:"+t.fillGlobalAlpha+";"),t.stroke?e+="stroke:"+t.strokeStyle+";":e+="stroke:none;",t.lineWidth&&(e+="stroke-width:"+t.lineWidth+";"),t.strokeGlobalAlpha&&(e+="stroke-opacity:"+t.strokeGlobalAlpha+";"),t.lineCap&&(e+="stroke-linecap:"+t.lineCap+";"),t.lineJoin&&(e+="stroke-linejoin:"+t.lineJoin+";"),t.lineDash&&(t.lineDash.length>0?e+="stroke-dasharray:"+t.lineDash.join(",")+";":e+="stroke-dasharray:none;"),e}export default{geo:Object.freeze({MINVALUE:e,add:r,sub:a,multi:n,isSame:i,getDistance:l,getNorm:o,isZero:s,getUnit:function(t){var r=o(t);if(r<e)throw new Error("cannot get unit vector of zero vector");return n(t,1/r)},getCross:u,getInner:c,cloneVectors:f,getCenter:h,getRadian:y,getSymmetry:p,rotate:x,solveEquationOrder2:g,getPedal:v,getCrossLineAndBezier:function(t,e,r,a,n){return function(t,e,r,a,n){var i=n.x-a.x,l=n.y-a.y,o=t.x-2*e.x+r.x,s=2*(e.x-t.x),u=t.x,c=t.y-2*e.y+r.y,f=2*(e.y-t.y),h=t.y;return g(o*l-i*c,s*l-i*f,l*u-l*a.x-i*h+i*a.y)}(t,e,r,a,n).filter(function(t){return 0<=t&&t<=1}).map(function(a){return{x:(r.x-2*e.x+t.x)*a*a+2*(e.x-t.x)*a+t.x,y:(r.y-2*e.y+t.y)*a*a+2*(e.y-t.y)*a+t.y}})},isCrossSegAndSeg:b,isTouchSegAndSeg:m,isParallel:S,isOnLine:k,isOnSeg:F,isOnPolygon:M,getCrossSegAndLine:A,isSameSeg:z,splitPolyByLine:function t(e,r){var a=[],n=[],i=[];if(e.forEach(function(t,l){var o=A([t,e[(l+1)%e.length]],r);a.push(t),o&&(a.push(o),n.push(l+1+n.length),i.push(o))}),n.length%2!=0)return[];var l=y(r[0],r[1]);i.sort(function(t,e){return x(t,-l).x-x(e,-l).x});for(var o=[],s=0;s<i.length-1;s+=2){for(var u=[i[s],i[s+1]],c=!1,f=0;f<e.length;f++)if(z(u,[e[f],e[(f+1)%e.length]])){c=!0;break}if(!c){o=u;break}}if(2!==o.length)return[];var h=i.concat(),p=h.indexOf(o[0]);-1!==p&&h.splice(p,1),-1!==(p=h.indexOf(o[1]))&&h.splice(p,1);var g=a.concat();h.forEach(function(t){var e=g.indexOf(t);g.splice(e,1)}),i=o;var v=(a=g).indexOf(i[0]),b=a.indexOf(i[1]);if(-1===v||-1===b)return[];(n=[])[0]=Math.min(v,b),n[1]=Math.max(v,b);for(var m=[],d=[],S=0;S<=n[0];S++)d.push({x:a[S].x,y:a[S].y});for(S=n[1];S<a.length;S++)d.push({x:a[S].x,y:a[S].y});m.push(d),d=[];for(S=n[0];S<=n[1];S++)d.push({x:a[S].x,y:a[S].y});m.push(d);var k=[];return m.forEach(function(e){var a=t(e,r);0===a.length?k.push(e):k.push.apply(k,a)}),k},triangleSplit:function(t){for(var e=q(t=P(t)),r=0,n=0,i=[];e.length>=3;){var l=e.concat();l.sort(function(t,e){return o(e)-o(t)}),r=e.indexOf(l[0]);var s=w(e,r);if(s)e.splice(r,1);else{var c=e.length;n=u(a(e[(r+1)%c],e[r]),a(e[r-1<0?c-1:r-1],e[r]));for(var f=r;!s;)if(u(a(e[(1+(f=(f+1)%c))%c],e[f]),a(e[f-1<0?c-1:f-1],e[f]))*n>0&&(s=w(e,f)),f===r)throw new Error("failed to split triangles");e.splice(f,1)}i.push(s)}return i},isPointOnTriangle:E,convertLoopwise:P,getLoopwise:C,getArea:I,approximateBezier:T,approximateArc:G,approximateArcWithPoint:L,getEllipseCenter:D,getCircleCenter:N,transform:R,omitSamePoint:q,getRegularPolygonArea:function(t,e){var r=Math.PI/e;return Math.pow(t,2)*Math.sin(r)*Math.cos(r)*e},getRegularPolygonRadius:function(t,e){var r=Math.PI/e,a=t/e;return Math.sqrt(a/Math.sin(r)/Math.cos(r))},getIncludedPolygonGroups:function(t){var e=t.concat();e.sort(function(t,e){return I(e)-I(t)});var r={},a=[];return e.forEach(function(t,n){if(!r[n]){r[n]=!0;var i=[t].concat(e.filter(function(e,a){return!r[a]&&e.filter(function(e){return M(e,t)}).length===e.length&&(r[a]=!0,!0)}));a.push(i)}}),a},getPolygonNotPolygon:function(t,e){for(var r=[],a=-1,n=[],i=[],o=0;o<t.length;o++){for(var s=[t[o],t[(o+1)%t.length]],u=0;u<e.length;u++){var c=[e[u],e[(u+1)%e.length]];if(b(s,c)){var f=A(s,c);f&&(a=o,n.push(u),i.push(f))}}if(-1!==a)break}if(-1===a)return t;if(n.length%2!=0)return t;var h=i.map(function(e){return l(e,t[a])}),y=h.concat().sort(function(t,e){return t-e}),p=h.indexOf(y[0]),x=n[p],g=e.concat();for(u=0;u<x;u++)g.push(g.shift());for(var v=n.map(function(t){return(t-x+e.length)%e.length}),m=i.concat(),d=0;d<p;d++)v.push(v.shift()),m.push(m.shift());for(o=0;o<t.length;o++)r.push(t[(o+a+1)%t.length]);for(o=0;o<v.length/2;o++){var S=v[2*o],k=v[2*o+1];for(r.push(m[2*o]),u=S+1;u<=k;u++)r.push(g[u]);r.push(m[2*o+1])}return r}}),svg:Object.freeze({configs:W,draw:function(t,e){t.lineCap=e.style.lineCap,t.lineJoin=e.style.lineJoin,t.beginPath(),e.d.forEach(function(e,r){0===r?t.moveTo(e.x,e.y):t.lineTo(e.x,e.y)}),t.closePath(),e.included&&e.included.forEach(function(e){e.forEach(function(e,r){0===r?t.moveTo(e.x,e.y):t.lineTo(e.x,e.y)}),t.closePath()}),e.style.fill&&(t.fillStyle=e.style.fillStyle,t.globalAlpha=e.style.fillGlobalAlpha,t.fill()),e.style.stroke&&(t.strokeStyle=e.style.strokeStyle,t.globalAlpha=e.style.strokeGlobalAlpha,t.lineWidth=e.style.lineWidth,t.setLineDash(e.style.lineDash),t.stroke()),t.globalAlpha=1},fitRect:function(e,r,a,n,i){var l=1/0,o=-1/0,s=1/0,u=-1/0;e.forEach(function(t){t.d.forEach(function(t){l=Math.min(l,t.x),o=Math.max(o,t.x),s=Math.min(s,t.y),u=Math.max(u,t.y)})});var c=e.map(function(e){return t(t({},e),{d:e.d.map(function(t){return{x:t.x-l,y:t.y-s}})})}),f=o-l,h=u-s,y=n/f,p=i/h,x=Math.min(y,p),g=c.map(function(e){return t(t({},e),{d:e.d.map(function(t){return{x:t.x*x,y:t.y*x}})})}),v=r+(n-f*x)/2,b=a+(i-h*x)/2;return g.map(function(e){return t(t({},e),{d:e.d.map(function(t){return{x:t.x+v,y:t.y+b}}),included:(e.included||[]).map(function(t){return t.map(function(t){return{x:(t.x-l)*x+v,y:(t.y-s)*x+b}})})})})},parseSvgGraphicsStr:function(t){var e=(new DOMParser).parseFromString(t,"image/svg+xml").getElementsByTagName("svg");return e&&0!==e.length?B(e[0]):[]},parseSvgGraphics:B,openCommandToD:J,parseOpenPath:function(e){var r=[],a="";return e.commands.forEach(function(e){if((a+=J(e)+" ")&&"Z"===e.type.toUpperCase()){var n=j(a);r.push({d:n,style:t(t({},{fill:!1,fillGlobalAlpha:1,fillStyle:"",lineCap:"butt",lineDash:[],lineJoin:"bevel",lineWidth:1,stroke:!1,strokeGlobalAlpha:1,strokeStyle:""}),{fill:!0,fillStyle:"black",stroke:!1})}),a=""}}),r},parsePathD:j,parsePath:V,parseRect:Z,parseEllipse:H,parseCircle:Q,adoptTransform:U,splitD:$,serializeSvgString:function(t){var e=X(t);return(new XMLSerializer).serializeToString(e)},serializeSvg:X,serializePath:K,serializePointList:Y,createStyle:_,parseTagStyle:tt,serializeStyle:et})};
//# sourceMappingURL=okageo.esm.min.js.map
