/*!
 * okageo v2.0.0
 * (c) miyanokomiya
 * Released under the MIT License.
 */
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var t=require("tslib");function e(t,e){return{x:t.x+e.x,y:t.y+e.y}}function r(t,e){return{x:t.x-e.x,y:t.y-e.y}}function n(t,e){return{x:t.x*e,y:t.y*e}}function a(t,e){var n=r(t,e);return Math.abs(n.x)<1e-6&&Math.abs(n.y)<1e-6}function i(t,e){var n=r(t,e);return Math.sqrt(n.x*n.x+n.y*n.y)}function o(t){return i(t,{x:0,y:0})}function l(t){return o(t)<1e-6}function s(t,e){return t.x*e.y-t.y*e.x}function u(t,e){return t.x*e.x+t.y*e.y}function c(e){return e.map((function(e){return t.__assign({},e)}))}function h(t,r){return n(e(t,r),.5)}function f(t){return{x:t.x+t.width/2,y:t.y+t.height/2}}function y(t,e){void 0===e&&(e={x:0,y:0});var n=r(t,e);return Math.atan2(n.y,n.x)}function p(t,a){return void 0===a&&(a={x:0,y:0}),e(n(r(a,t),2),t)}function x(t,n,a){void 0===a&&(a={x:0,y:0});var i=r(t,a);return e({x:Math.cos(n)*i.x-Math.sin(n)*i.y,y:Math.sin(n)*i.x+Math.cos(n)*i.y},a)}function g(t,e,r){if(0===t)return 0===e?[]:[-r/e];var n=e*e-4*t*r;if(n<0)return[];var a=.5/t;if(0===n)return[-e*a];var i=Math.sqrt(n);return[(-e+i)*a,(-e-i)*a]}function v(t,a){if(2!==a.length)throw new Error("line must be length = 2");var i=a[0],o=r(a[1],i);return e(i,n(o,u(o,r(t,i))/u(o,o)))}function d(t,e){var r=b(t,e),n=r.ta,a=r.tb;return r.tc*r.td<0&&n*a<0}function b(t,e){var r=t[0].x,n=t[0].y,a=t[1].x,i=t[1].y,o=e[0].x,l=e[0].y,s=e[1].x,u=e[1].y;return{ta:(o-s)*(n-l)+(l-u)*(o-r),tb:(o-s)*(i-l)+(l-u)*(o-a),tc:(r-a)*(l-n)+(n-i)*(r-o),td:(r-a)*(u-n)+(n-i)*(r-s)}}function m(t,e){var r=s(t,e);return Math.abs(r)<1e-6}function S(t,e){return l(r(t,v(t,e)))}function k(t,e){if(!l(r(t,v(t,e))))return!1;var n=r(e[1],e[0]),a=r(t,e[0]);return!(u(n,a)<0)&&!(o(n)<o(a))}function F(t,e){if(e.find((function(e){return t.x===e.x&&t.y===e.y})))return!0;for(var r=e.map((function(t,r){return[t,r<e.length-1?e[r+1]:e[0]]})).filter((function(t){return!a(t[0],t[1])})),n=0;n<r.length;n++){var i=r[n];if(k(t,i))return!0}return r.filter((function(e){return function(t,e){if(Math.abs(e[0].y-e[1].y)<1e-6)return!1;var r,n;if(e[0].y<e[1].y?(n=e[0],r=e[1]):(r=e[0],n=e[1]),t.y<n.y||r.y<=t.y)return!1;var a=M(e,[t,{x:t.x+1,y:t.y}]);return!(!a||a.x<=t.x)}(t,e)})).length%2==1}function M(e,n){if(m(r(e[0],e[1]),r(n[0],n[1])))return null;if(S(e[0],n))return t.__assign({},e[0]);if(S(e[1],n))return t.__assign({},e[1]);var a=((n[1].x-n[0].x)*(e[0].y-n[0].y)-(n[1].y-n[0].y)*(e[0].x-n[0].x))/2,i=a/(a+((n[1].x-n[0].x)*(n[0].y-e[1].y)-(n[1].y-n[0].y)*(n[0].x-e[1].x))/2);return 0<i&&i<1?{x:e[0].x+(e[1].x-e[0].x)*i,y:e[0].y+(e[1].y-e[0].y)*i}:null}function _(t,e){return!(!a(t[0],e[0])||!a(t[1],e[1]))||!(!a(t[0],e[1])||!a(t[1],e[0]))}function A(t,e){var r=[],n=[],a=[];if(t.forEach((function(i,o){var l=M([i,t[(o+1)%t.length]],e);r.push(i),l&&(r.push(l),n.push(o+1+n.length),a.push(l))})),n.length%2!=0)return[];var i=y(e[0],e[1]);a.sort((function(t,e){return x(t,-i).x-x(e,-i).x}));for(var o=[],l=0;l<a.length-1;l+=2){for(var s=[a[l],a[l+1]],u=!1,c=0;c<t.length;c++)if(_(s,[t[c],t[(c+1)%t.length]])){u=!0;break}if(!u){o=s;break}}if(2!==o.length)return[];var h=a.concat(),f=h.indexOf(o[0]);-1!==f&&h.splice(f,1),-1!==(f=h.indexOf(o[1]))&&h.splice(f,1);var p=r.concat();h.forEach((function(t){var e=p.indexOf(t);p.splice(e,1)})),a=o;var g=(r=p).indexOf(a[0]),v=r.indexOf(a[1]);if(-1===g||-1===v)return[];(n=[])[0]=Math.min(g,v),n[1]=Math.max(g,v);for(var d=[],b=[],m=0;m<=n[0];m++)b.push({x:r[m].x,y:r[m].y});for(m=n[1];m<r.length;m++)b.push({x:r[m].x,y:r[m].y});d.push(b),b=[];for(m=n[0];m<=n[1];m++)b.push({x:r[m].x,y:r[m].y});d.push(b);var S=[];return d.forEach((function(t){var r=A(t,e);0===r.length?S.push(t):S.push.apply(S,r)})),S}function z(t,e){var r=t.length,n=t[e],a=t[(e+1)%r],i=t[e-1<0?r-1:e-1],o=[n,a,i],l=!1;return t.some((function(t){return t!==n&&t!==a&&t!==i&&w(o,t)&&(l=!0),l})),l?null:o}function w(t,e){var n=r(t[1],t[0]),a=r(t[2],t[1]),i=r(t[0],t[2]),o=r(e,t[0]),l=r(e,t[1]),u=r(e,t[2]),c=s(n,l),h=s(a,u),f=s(i,o);return c>=0&&h>=0&&f>=0||c<=0&&h<=0&&f<=0}function R(t){var e=t.concat();return-1===E(t)&&e.reverse(),e}function E(t){var e=P(t,!0);return e>0?1:e<0?-1:0}function P(t,e){if(void 0===e&&(e=!1),t.length<3)return 0;for(var r=0,n=t.length,a=0;a<n-1;a++)r+=(t[a].x-t[a+1].x)*(t[a].y+t[a+1].y);return r+=(t[n-1].x-t[0].x)*(t[n-1].y+t[0].y),r/=2,e||(r=Math.abs(r)),r}function C(t,e){var r=[],a=1/e;if(3===t.length)for(var i=0;i<=e;i++){var o=a*i,l=n(t[0],(1-o)*(1-o)),s=n(t[1],2*o*(1-o)),u=n(t[2],o*o);r.push({x:l.x+s.x+u.x,y:l.y+s.y+u.y})}else{if(4!==t.length)throw new Error("connot approximate");for(i=0;i<=e;i++){o=a*i,l=n(t[0],(1-o)*(1-o)*(1-o)),s=n(t[1],3*o*(1-o)*(1-o)),u=n(t[2],3*o*o*(1-o));var c=n(t[3],o*o*o);r.push({x:l.x+s.x+u.x+c.x,y:l.y+s.y+u.y+c.y})}}return r}function B(t,r,n,a,i,o,l){for(var s=[],u=(a-n)/l,c=0;c<=l;c++){var h=u*c+n-o;s.push(e(x({x:t*Math.cos(h),y:r*Math.sin(h)},o),i))}return s}function L(t,e,r,n,a,i,o,l){if(t*e==0)return[r,n];var s=G(r,n,t=Math.abs(t),e=Math.abs(e),o),u=s.centers;t*=s.radiusRate,e*=s.radiusRate;var c=null,h=0,f=0,y=T(r,t,c=a&&i||!a&&!i?E([r,n,u[0]])<0?u[0]:u[1]:E([r,n,u[0]])>0?u[0]:u[1],o),p=T(n,t,c,o);return i?y>p?(h=y-2*Math.PI,f=p):(h=y,f=p):y>p?(h=y,f=p):(h=y,f=p-2*Math.PI),B(t,e,h,f,c,o,l)}function T(t,e,r,n){t=x(t,-n,r);var a=Math.acos((t.x-r.x)/e);return t.y-r.y<0&&(a=-a+2*Math.PI),a+=n,a%=2*Math.PI}function G(t,e,r,n,a){t=x(t,-a),e=x(e,-a);var i=I({x:t.x/r,y:t.y/n},{x:e.x/r,y:e.y/n},1),o=i.centers,l={x:o[0].x*r,y:o[0].y*n},s={x:o[1].x*r,y:o[1].y*n};return{centers:[l=x(l,a),s=x(s,a)],radiusRate:i.radiusRate}}function I(t,e,r){var n=(t.x+e.x)/2,a=(t.x-e.x)/2,i=(t.y+e.y)/2,o=(t.y-e.y)/2,l=Math.sqrt(a*a+o*o),s=Math.pow(r/l,2)-1;if(s<0){var u=h(t,e);return{centers:[u,u],radiusRate:l/r}}var c=Math.sqrt(s);return{centers:[{x:n+o*c,y:i-a*c},{x:n-o*c,y:i+a*c}],radiusRate:1}}function O(t,e){var r=e[0],n=e[1],a=e[2],i=e[3],o=e[4],l=e[5];return t.map((function(t){return{x:r*t.x+a*t.y+o,y:n*t.x+i*t.y+l}}))}function D(t){for(var e=t.concat(),r=t.length,n=0;n<r;n++){if(a(e[n],e[(n+1)%r])){e.splice(n,1),e=D(e);break}}return e}function W(t){var e=t.concat();e.sort((function(t,e){return P(e)-P(t)}));var r={},n=[];return e.forEach((function(t,a){if(!r[a]){r[a]=!0;var i=[t].concat(e.filter((function(e,n){return!r[n]&&(e.filter((function(e){return F(e,t)})).length===e.length&&(r[n]=!0,!0))})));n.push(i)}})),n}function N(t,e){for(var r=[],n=-1,a=[],o=[],l=0;l<t.length;l++){for(var s=[t[l],t[(l+1)%t.length]],u=0;u<e.length;u++){var c=[e[u],e[(u+1)%e.length]];if(d(s,c)){var h=M(s,c);h&&(n=l,a.push(u),o.push(h))}}if(-1!==n)break}if(-1===n)return t;if(a.length%2!=0)return t;var f=o.map((function(e){return i(e,t[n])})),y=f.concat().sort((function(t,e){return t-e})),p=f.indexOf(y[0]),x=a[p],g=e.concat();for(u=0;u<x;u++)g.push(g.shift());for(var v=a.map((function(t){return(t-x+e.length)%e.length})),b=o.concat(),m=0;m<p;m++)v.push(v.shift()),b.push(b.shift());for(l=0;l<t.length;l++)r.push(t[(l+n+1)%t.length]);for(l=0;l<v.length/2;l++){var S=v[2*l],k=v[2*l+1];r.push(b[2*l]);for(u=S+1;u<=k;u++)r.push(g[u]);r.push(b[2*l+1])}return r}function q(t,e,r){return{x:t.x-e/2,y:t.y-r/2,width:t.width+e,height:t.height+r}}var j=Object.freeze({__proto__:null,MINVALUE:1e-6,add:e,sub:r,multi:n,isSame:a,getDistance:i,getNorm:o,isZero:l,getUnit:function(t){var e=o(t);if(e<1e-6)throw new Error("cannot get unit vector of zero vector");return n(t,1/e)},getCross:s,getInner:u,cloneVectors:c,getCenter:h,getRectCenter:f,getRadian:y,getSymmetry:p,rotate:x,solveEquationOrder2:g,getPedal:v,getCrossLineAndBezier:function(t,e,r,n,a){return function(t,e,r,n,a){var i=a.x-n.x,o=a.y-n.y,l=t.x-2*e.x+r.x,s=2*(e.x-t.x),u=t.x,c=t.y-2*e.y+r.y,h=2*(e.y-t.y),f=t.y;return g(l*o-i*c,s*o-i*h,o*u-o*n.x-i*f+i*n.y)}(t,e,r,n,a).filter((function(t){return 0<=t&&t<=1})).map((function(n){return{x:(r.x-2*e.x+t.x)*n*n+2*(e.x-t.x)*n+t.x,y:(r.y-2*e.y+t.y)*n*n+2*(e.y-t.y)*n+t.y}}))},isCrossSegAndSeg:d,isTouchSegAndSeg:function(t,e){var r=b(t,e),n=r.ta,a=r.tb;return r.tc*r.td<=0&&n*a<=0},isParallel:m,isOnLine:S,isOnSeg:k,isOnPolygon:F,getCrossSegAndLine:M,isSameSeg:_,splitPolyByLine:A,triangleSplit:function(t){for(var e=D(t=R(t)),n=0,a=0,i=[];e.length>=3;){var l=e.concat();l.sort((function(t,e){return o(e)-o(t)})),n=e.indexOf(l[0]);var u=z(e,n);if(u)e.splice(n,1);else{var c=e.length;a=s(r(e[(n+1)%c],e[n]),r(e[n-1<0?c-1:n-1],e[n]));for(var h=n;!u;){if(s(r(e[((h=(h+1)%c)+1)%c],e[h]),r(e[h-1<0?c-1:h-1],e[h]))*a>0&&(u=z(e,h)),h===n)throw new Error("failed to split triangles")}e.splice(h,1)}i.push(u)}return i},isPointOnTriangle:w,convertLoopwise:R,getLoopwise:E,getArea:P,approximateBezier:C,approximateArc:B,approximateArcWithPoint:L,getEllipseCenter:G,getCircleCenter:I,transform:O,omitSamePoint:D,getRegularPolygonArea:function(t,e){var r=Math.PI/e;return Math.pow(t,2)*Math.sin(r)*Math.cos(r)*e},getRegularPolygonRadius:function(t,e){var r=Math.PI/e,n=t/e;return Math.sqrt(n/Math.sin(r)/Math.cos(r))},getIncludedPolygonGroups:W,getPolygonNotPolygon:N,getOuterRectangle:function(t){if(0===t.length)return{x:0,y:0,width:0,height:0};for(var e=1/0,r=1/0,n=-1/0,a=-1/0,i=0;i<t.length;i++)for(var o=t[i],l=0;l<o.length;l++){var s=o[l];e=Math.min(e,s.x),r=Math.min(r,s.y),n=Math.max(n,s.x),a=Math.max(a,s.y)}return{x:e,y:r,width:n-e,height:a-r}},getGrid:function(t,e,r,n){void 0===r&&(r=0),void 0===n&&(n=0);for(var a=[],i=t.x,o=t.x+t.width,l=t.y,s=t.y+t.height,u=i+r;u<o;)i<u&&u<o&&a.push([{x:u,y:l},{x:u,y:s}]),u+=e;for(var c=l+n;c<s;)l<c&&c<s&&a.push([{x:i,y:c},{x:o,y:c}]),c+=e;return a},expandRecntagle:q,expandRecntagleScale:function(t,e,r){return q(t,t.width*(e-1),t.height*(r-1))}}),J="http://www.w3.org/2000/svg",V={bezierSplitSize:10,ellipseSplitSize:20};function Z(t){for(var e=[],r=t.getElementsByTagName("path"),n=0;n<r.length;n++){var a=r[n];e.push({d:U(a),style:it(a)})}var i=t.getElementsByTagName("rect");for(n=0;n<i.length;n++){a=i[n];e.push({d:$(a),style:it(a)})}var o=t.getElementsByTagName("ellipse");for(n=0;n<o.length;n++){a=o[n];e.push({d:X(a),style:it(a)})}var l=t.getElementsByTagName("circle");for(n=0;n<l.length;n++){a=l[n];e.push({d:K(a),style:it(a)})}return e}function H(t){var e=t.type;return"x1"in t&&(e+=" "+t.x1),"y1"in t&&(e+=" "+t.y1),"x2"in t&&(e+=" "+t.x2),"y2"in t&&(e+=" "+t.y2),"x3"in t&&(e+=" "+t.x3),"y3"in t&&(e+=" "+t.y3),"x"in t&&(e+=" "+t.x),"y"in t&&(e+=" "+t.y),e}function Q(t){var e=[],r=tt(t),n={x:0,y:0},a={x:0,y:0};return r.forEach((function(t){var r=[],i=null,o=null;switch(t[0]){case"M":case"L":r.push({x:parseFloat(t[1]),y:parseFloat(t[2])});break;case"m":case"l":r.push({x:n.x+parseFloat(t[1]),y:n.y+parseFloat(t[2])});break;case"H":r.push({x:parseFloat(t[1]),y:n.y});break;case"V":r.push({x:n.x,y:parseFloat(t[1])});break;case"h":r.push({x:n.x+parseFloat(t[1]),y:n.y});break;case"v":r.push({x:n.x,y:n.y+parseFloat(t[1])});break;case"Q":(r=C([i=n,o={x:parseFloat(t[1]),y:parseFloat(t[2])},{x:parseFloat(t[3]),y:parseFloat(t[4])}],V.bezierSplitSize)).shift();break;case"q":(r=C([i=n,o={x:i.x+parseFloat(t[1]),y:i.y+parseFloat(t[2])},{x:i.x+parseFloat(t[3]),y:i.y+parseFloat(t[4])}],V.bezierSplitSize)).shift();break;case"T":(r=C([i=n,o=p(i,a),{x:parseFloat(t[1]),y:parseFloat(t[2])}],V.bezierSplitSize)).shift();break;case"t":(r=C([i=n,o=p(i,a),{x:i.x+parseFloat(t[1]),y:i.y+parseFloat(t[2])}],V.bezierSplitSize)).shift();break;case"C":(r=C([i=n,o={x:parseFloat(t[1]),y:parseFloat(t[2])},{x:parseFloat(t[3]),y:parseFloat(t[4])},{x:parseFloat(t[5]),y:parseFloat(t[6])}],V.bezierSplitSize)).shift();break;case"c":(r=C([i=n,o={x:i.x+parseFloat(t[1]),y:i.y+parseFloat(t[2])},{x:i.x+parseFloat(t[3]),y:i.y+parseFloat(t[4])},{x:i.x+parseFloat(t[5]),y:i.y+parseFloat(t[6])}],V.bezierSplitSize)).shift();break;case"S":(r=C([i=n,o=p(i,a),{x:parseFloat(t[1]),y:parseFloat(t[2])},{x:parseFloat(t[3]),y:parseFloat(t[4])}],V.bezierSplitSize)).shift();break;case"s":(r=C([i=n,o=p(i,a),{x:i.x+parseFloat(t[1]),y:i.y+parseFloat(t[2])},{x:i.x+parseFloat(t[3]),y:i.y+parseFloat(t[4])}],V.bezierSplitSize)).shift();break;case"A":i=n,o={x:parseFloat(t[6]),y:parseFloat(t[7])},(r=L(parseFloat(t[1]),parseFloat(t[2]),i,o,!!parseInt(t[4],10),!!parseInt(t[5],10),parseFloat(t[3])/180*Math.PI,V.bezierSplitSize)).shift();break;case"a":o={x:(i=n).x+parseFloat(t[6]),y:i.y+parseFloat(t[7])},(r=L(parseFloat(t[1]),parseFloat(t[2]),i,o,!!parseInt(t[4],10),!!parseInt(t[5],10),parseFloat(t[3])/180*Math.PI,V.bezierSplitSize)).shift()}r.length>0&&(n=r[r.length-1],e=e.concat(r),r.length>1&&(a=r[r.length-2]))})),e}function U(t){var e=t.getAttribute("d");return e?Y(t.getAttribute("transform"),Q(e)):[]}function $(t){var e=[],r=parseFloat(t.getAttribute("x")||"0"),n=parseFloat(t.getAttribute("y")||"0"),a=parseFloat(t.getAttribute("width")||"0"),i=parseFloat(t.getAttribute("height")||"0");return e.push({x:r,y:n}),e.push({x:r+a,y:n}),e.push({x:r+a,y:n+i}),e.push({x:r,y:n+i}),e=Y(t.getAttribute("transform"),e)}function X(t){var e=[],r=parseFloat(t.getAttribute("cx")||"0"),n=parseFloat(t.getAttribute("cy")||"0");return e=B(parseFloat(t.getAttribute("rx")||"1"),parseFloat(t.getAttribute("ry")||"1"),0,2*Math.PI,{x:r,y:n},0,V.ellipseSplitSize),e=Y(t.getAttribute("transform"),e)}function K(t){var e=[],r=parseFloat(t.getAttribute("cx")||"0"),n=parseFloat(t.getAttribute("cy")||"0"),a=parseFloat(t.getAttribute("r")||"1");return e=B(a,a,0,2*Math.PI,{x:r,y:n},0,V.ellipseSplitSize),e=Y(t.getAttribute("transform"),e)}function Y(t,e){if(!t)return e;var r=c(e);return t.split(/\)/).forEach((function(t){var e=t.split(/\(/);if(2===e.length){var n=e[0],a=[];switch(e[1].split(/,/).forEach((function(t){return a.push(parseFloat(t))})),n.trim().toLowerCase()){case"matrix":r=O(r,a);break;case"translate":r=r.map((function(t){return{x:t.x+a[0],y:t.y+a[1]}}));break;case"scale":var i=a[0],o=a[0];a.length>1&&(o=a[1]),r=r.map((function(t){return{x:t.x*i,y:t.y*o}}));break;case"rotate":var l={x:0,y:0};a.length>2&&(l={x:a[1],y:a[2]}),r=r.map((function(t){return x(t,a[0]*Math.PI/180,l)}));break;case"skewx":r=r.map((function(t){return{x:t.x+Math.tan(a[0]*Math.PI/180)*t.y,y:t.y}}));break;case"skewy":r=r.map((function(t){return{x:t.x,y:t.y+Math.tan(a[0]*Math.PI/180)*t.x}}))}}})),r}function tt(t){for(var e=/M|m|L|l|H|h|V|v|C|c|S|s|Q|q|T|t|A|a|Z|z/g,r=t.replace(e," $& ").replace(/([^e])(-\d(\d*\.?)\d*)/g,"$1 $2 ").split(/,| /).filter((function(t){return t})),n="M",a=[],i=0;i<r.length;){var o=[];if(r[i].match(e)?(o[0]=r[i].trim(),n=o[0],i++):o[0]=n,o[0].match(/Z|z/));else if(o[0].match(/V|v|H|h/))o=o.concat(r.slice(i,i+1)),i+=1;else if(o[0].match(/M|m|L|l|T|t/))o=o.concat(r.slice(i,i+2)),i+=2;else if(o[0].match(/Q|q|S|s/))o=o.concat(r.slice(i,i+4)),i+=4;else if(o[0].match(/C|c/))o=o.concat(r.slice(i,i+6)),i+=6;else{if(!o[0].match(/A|a/))break;o=o.concat(r.slice(i,i+7)),i+=7}a.push(o)}return a}function et(t){var e=document.createElementNS(J,"svg"),r=1,n=1;return t.forEach((function(t){e.appendChild(rt(t.d,t.style)),t.d.forEach((function(t){r=Math.max(r,t.x),n=Math.max(n,t.y)}))})),r*=1.1,n*=1.1,e.setAttribute("width",""+r),e.setAttribute("height",""+n),e}function rt(t,e){var r=document.createElementNS(J,"path");return r.setAttribute("d",nt(t)),r.setAttribute("style",ot(e)),r}function nt(t,e){if(0===t.length)return"";var r=t[0],n=t.slice(1);return"M "+r.x+","+r.y+n.map((function(t){return" L "+t.x+","+t.y})).join("")+(e?"":" Z")}function at(){return{fill:!1,fillGlobalAlpha:1,fillStyle:"",lineCap:"butt",lineDash:[],lineJoin:"bevel",lineWidth:1,stroke:!1,strokeGlobalAlpha:1,strokeStyle:""}}function it(t){var e={fill:!1,fillGlobalAlpha:1,fillStyle:"",lineCap:"butt",lineDash:[],lineJoin:"bevel",lineWidth:1,stroke:!1,strokeGlobalAlpha:1,strokeStyle:""},r={},n=t.getAttributeNode("style");n?n.value.split(";").forEach((function(t){var e=t.split(":");2===e.length&&(r[e[0].trim()]=e[1].trim())})):t.getAttributeNames().forEach((function(e){var n=t.getAttributeNode(e);n&&(r[n.name]=n.value)}));return Object.keys(r).forEach((function(t){t=t.toLowerCase();var n=r[t];if("fill"===t)"none"===n?(e.fillStyle="",e.fill=!1):(e.fillStyle=n,e.fill=!0);else if("stroke"===t)"none"===n?(e.strokeStyle="",e.stroke=!1):(e.strokeStyle=n,e.stroke=!0);else if("stroke-width"===t)e.lineWidth=parseFloat(n);else if("stroke-opacity"===t)e.strokeGlobalAlpha=parseFloat(n);else if("fill-opacity"===t)e.fillGlobalAlpha=parseFloat(n);else if("stroke-linecap"===t)e.lineCap=n;else if("stroke-linejoin"===t)e.lineJoin=n;else if("stroke-dasharray"===t)if("none"===n.toLowerCase())e.lineDash=[];else{var a=n.split(",");e.lineDash=[],a.forEach((function(t){e.lineDash.push(parseFloat(t))}))}})),e}function ot(t){var e="";return t.fill?e+="fill:"+t.fillStyle+";":e+="fill:none;",t.fillGlobalAlpha&&(e+="fill-opacity:"+t.fillGlobalAlpha+";"),t.stroke?e+="stroke:"+t.strokeStyle+";":e+="stroke:none;",t.lineWidth&&(e+="stroke-width:"+t.lineWidth+";"),t.strokeGlobalAlpha&&(e+="stroke-opacity:"+t.strokeGlobalAlpha+";"),t.lineCap&&(e+="stroke-linecap:"+t.lineCap+";"),t.lineJoin&&(e+="stroke-linejoin:"+t.lineJoin+";"),t.lineDash&&(t.lineDash.length>0?e+="stroke-dasharray:"+t.lineDash.join(",")+";":e+="stroke-dasharray:none;"),e}var lt=Object.freeze({__proto__:null,configs:V,draw:function(t,e){t.lineCap=e.style.lineCap,t.lineJoin=e.style.lineJoin,t.beginPath(),e.d.forEach((function(e,r){0===r?t.moveTo(e.x,e.y):t.lineTo(e.x,e.y)})),t.closePath(),e.included&&e.included.forEach((function(e){e.forEach((function(e,r){0===r?t.moveTo(e.x,e.y):t.lineTo(e.x,e.y)})),t.closePath()})),e.style.fill&&(t.fillStyle=e.style.fillStyle,t.globalAlpha=e.style.fillGlobalAlpha,t.fill()),e.style.stroke&&(t.strokeStyle=e.style.strokeStyle,t.globalAlpha=e.style.strokeGlobalAlpha,t.lineWidth=e.style.lineWidth,t.setLineDash(e.style.lineDash),t.stroke()),t.globalAlpha=1},fitRect:function(e,r,n,a,i){var o=1/0,l=-1/0,s=1/0,u=-1/0;e.forEach((function(t){t.d.forEach((function(t){o=Math.min(o,t.x),l=Math.max(l,t.x),s=Math.min(s,t.y),u=Math.max(u,t.y)}))}));var c=e.map((function(e){return t.__assign(t.__assign({},e),{d:e.d.map((function(t){return{x:t.x-o,y:t.y-s}}))})})),h=l-o,f=u-s,y=a/h,p=i/f,x=Math.min(y,p),g=c.map((function(e){return t.__assign(t.__assign({},e),{d:e.d.map((function(t){return{x:t.x*x,y:t.y*x}}))})})),v=r+(a-h*x)/2,d=n+(i-f*x)/2;return g.map((function(e){return t.__assign(t.__assign({},e),{d:e.d.map((function(t){return{x:t.x+v,y:t.y+d}})),included:(e.included||[]).map((function(t){return t.map((function(t){return{x:(t.x-o)*x+v,y:(t.y-s)*x+d}}))}))})}))},parseSvgGraphicsStr:function(t){var e=(new DOMParser).parseFromString(t,"image/svg+xml").getElementsByTagName("svg");return e&&0!==e.length?Z(e[0]):[]},parseSvgGraphics:Z,openCommandToD:H,parseOpenPath:function(e){var r=[],n="";return e.commands.forEach((function(e){if((n+=H(e)+" ")&&"Z"===e.type.toUpperCase()){var a=Q(n);r.push({d:a,style:t.__assign(t.__assign({},{fill:!1,fillGlobalAlpha:1,fillStyle:"",lineCap:"butt",lineDash:[],lineJoin:"bevel",lineWidth:1,stroke:!1,strokeGlobalAlpha:1,strokeStyle:""}),{fill:!0,fillStyle:"black",stroke:!1})}),n=""}})),r},parsePathD:Q,parsePath:U,parseRect:$,parseEllipse:X,parseCircle:K,adoptTransform:Y,splitD:tt,serializeSvgString:function(t){var e=et(t);return(new XMLSerializer).serializeToString(e)},serializeSvg:et,serializePath:rt,serializePointList:nt,createStyle:at,parseTagStyle:it,serializeStyle:ot,splitPath:function(e,r){var n=A(e.d,r);if(n.length<2)return[e];var a=E(e.d),i=[],o=[];e.included&&e.included.forEach((function(t){E(t)===a?i.push(t):o.push(t)})),i.forEach((function(e){var a=A(e,r);n=t.__spreadArrays(n,a.length>0?a:[e])}));var l=[];return o.forEach((function(t){A(t,r).length>0?l.push(t):n.push(t)})),W(n.map((function(t){return l.reduce((function(t,e){return N(t,e)}),t)}))).map((function(t){return{d:t[0],included:t.slice(1),style:e.style}}))},getGroupedPathList:function(t,e){return void 0===e&&(e={fill:!1,fillGlobalAlpha:1,fillStyle:"",lineCap:"butt",lineDash:[],lineJoin:"bevel",lineWidth:1,stroke:!1,strokeGlobalAlpha:1,strokeStyle:""}),W(t).map((function(t){return{d:t[0],included:t.slice(1),style:e}}))}});function st(r,n){return t.__assign(t.__assign({},r),e(r,n))}function ut(t){return{x:t.x,y:t.y}}function ct(t){return{x:t.x+t.width,y:t.y}}function ht(t){return{x:t.x+t.width,y:t.y+t.height}}function ft(t){return{x:t.x,y:t.y+t.height}}function yt(e,r){var n=e.x+r,a=e.width-r;return t.__assign(t.__assign({},e),{x:Math.min(n,n+a),width:Math.abs(a)})}function pt(e,r){var n=e.width+r;return n>=0?t.__assign(t.__assign({},e),{width:n}):t.__assign(t.__assign({},e),{x:e.x+n,width:-n})}function xt(e,r){var n=e.y+r,a=e.height-r;return t.__assign(t.__assign({},e),{y:Math.min(n,n+a),height:Math.abs(a)})}function gt(e,r){var n=e.height+r;return n>=0?t.__assign(t.__assign({},e),{height:n}):t.__assign(t.__assign({},e),{y:e.y+n,height:-n})}function vt(t,n,a){if(!a)return xt(yt(t,n.x),n.y);var i={x:t.x,y:t.y},o=[i,{x:t.x+t.width,y:t.y+t.height}],l=r(v(e(i,n),o),i);return xt(yt(t,l.x),l.y)}function dt(t,n,a){if(!a)return xt(pt(t,n.x),n.y);var i={x:t.x+t.width,y:t.y},o=[i,{x:t.x,y:t.y+t.height}],l=r(v(e(i,n),o),i);return xt(pt(t,l.x),l.y)}function bt(t,n,a){if(!a)return gt(pt(t,n.x),n.y);var i={x:t.x+t.width,y:t.y+t.height},o=[i,t],l=r(v(e(i,n),o),i);return gt(pt(t,l.x),l.y)}function mt(t,n,a){if(!a)return gt(yt(t,n.x),n.y);var i={x:t.x,y:t.y+t.height},o=[i,{x:t.x+t.width,y:t.y}],l=r(v(e(i,n),o),i);return gt(yt(t,l.x),l.y)}function St(t,e,n,a){return void 0===n&&(n=0),st(e,r(x(a(t),n,f(t)),x(a(e),n,f(e))))}var kt=Object.freeze({__proto__:null,moveRect:st,getRectLT:ut,getRectRT:ct,getRectRB:ht,getRectLB:ft,resizeRectByLeft:yt,resizeRectByRight:pt,resizeRectByTop:xt,resizeRectByBottom:gt,resizeRectByLeftTop:vt,resizeRectByRightTop:dt,resizeRectByRightBottom:bt,resizeRectByLeftBottom:mt,resizeRectByLeftTopWithRotation:function(t,e,n,a,i){void 0===a&&(a=0);var o=f(t);return St(t,vt(t,r(x(n,-a,o),x(e,-a,o)),i),a,ht)},resizeRectByRightTopWithRotation:function(t,e,n,a,i){void 0===a&&(a=0);var o=f(t);return St(t,dt(t,r(x(n,-a,o),x(e,-a,o)),i),a,ft)},resizeRectByRightBottomWithRotation:function(t,e,n,a,i){void 0===a&&(a=0);var o=f(t);return St(t,bt(t,r(x(n,-a,o),x(e,-a,o)),i),a,ut)},resizeRectByLeftBottomWithRotation:function(t,e,n,a,i){void 0===a&&(a=0);var o=f(t);return St(t,mt(t,r(x(n,-a,o),x(e,-a,o)),i),a,ct)}});exports.drawing=kt,exports.geo=j,exports.svg=lt;
//# sourceMappingURL=okageo.min.js.map
