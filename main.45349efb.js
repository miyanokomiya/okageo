parcelRequire=function(e,r,t,n){var i,o="function"==typeof parcelRequire&&parcelRequire,u="function"==typeof require&&require;function f(t,n){if(!r[t]){if(!e[t]){var i="function"==typeof parcelRequire&&parcelRequire;if(!n&&i)return i(t,!0);if(o)return o(t,!0);if(u&&"string"==typeof t)return u(t);var c=new Error("Cannot find module '"+t+"'");throw c.code="MODULE_NOT_FOUND",c}p.resolve=function(r){return e[t][1][r]||r},p.cache={};var l=r[t]=new f.Module(t);e[t][0].call(l.exports,p,l,l.exports,this)}return r[t].exports;function p(e){return f(p.resolve(e))}}f.isParcelRequire=!0,f.Module=function(e){this.id=e,this.bundle=f,this.exports={}},f.modules=e,f.cache=r,f.parent=o,f.register=function(r,t){e[r]=[function(e,r){r.exports=t},{}]};for(var c=0;c<t.length;c++)try{f(t[c])}catch(e){i||(i=e)}if(t.length){var l=f(t[t.length-1]);"object"==typeof exports&&"undefined"!=typeof module?module.exports=l:"function"==typeof define&&define.amd?define(function(){return l}):n&&(this[n]=l)}if(parcelRequire=f,i)throw i;return f}({"WBaa":[function(require,module,exports) {
"use strict";function t(t){return e(t)||n(t)||u(t)||r()}function r(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function n(t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}function e(t){if(Array.isArray(t))return a(t)}function o(t,r){return s(t)||f(t,r)||u(t,r)||i()}function i(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function u(t,r){if(t){if("string"==typeof t)return a(t,r);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?a(t,r):void 0}}function a(t,r){(null==r||r>t.length)&&(r=t.length);for(var n=0,e=new Array(r);n<r;n++)e[n]=t[n];return e}function f(t,r){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t)){var n=[],e=!0,o=!1,i=void 0;try{for(var u,a=t[Symbol.iterator]();!(e=(u=a.next()).done)&&(n.push(u.value),!r||n.length!==r);e=!0);}catch(f){o=!0,i=f}finally{try{e||null==a.return||a.return()}finally{if(o)throw i}}return n}}function s(t){if(Array.isArray(t))return t}Object.defineProperty(exports,"__esModule",{value:!0}),exports.vec=h,exports.add=p,exports.sub=l,exports.multi=y,exports.isSame=v,exports.getDistance=g,exports.getPolylineLength=d,exports.getNorm=M,exports.isZero=m,exports.getUnit=b,exports.getCross=w,exports.getInner=A,exports.cloneVectors=P,exports.getCenter=O,exports.getRectCenter=S,exports.getPolygonCenter=I,exports.getRadian=E,exports.getSymmetry=C,exports.rotate=L,exports.solveEquationOrder2=q,exports.getPedal=j,exports.getCrossLineAndBezier=z,exports.isCrossSegAndSeg=B,exports.isTouchSegAndSeg=F,exports.isParallel=k,exports.isOnLine=U,exports.isOnSeg=V,exports.isOnPolygon=D,exports.getCrossSegAndLine=Y,exports.isSameSeg=G,exports.splitPolyByLine=Q,exports.triangleSplit=W,exports.isPointOnTriangle=Z,exports.convertLoopwise=$,exports.getLoopwise=H,exports.getArea=J,exports.approximateBezier=K,exports.getPointOnBezier2=tt,exports.getBezier2LerpFn=rt,exports.getPointOnBezier3=nt,exports.getBezier3LerpFn=et,exports.getYOnBezier3AtX=ot,exports.approximateArc=it,exports.approximateArcWithPoint=ut,exports.getArcLerpFn=at,exports.lerpPoint=ft,exports.getApproPoints=st,exports.getEllipseCenter=ct,exports.getCircleCenter=xt,exports.transform=ht,exports.invertTransform=pt,exports.multiAffine=lt,exports.multiAffines=yt,exports.applyAffine=vt,exports.omitSamePoint=gt,exports.getRegularPolygonArea=dt,exports.getRegularPolygonRadius=Mt,exports.getIncludedPolygonGroups=mt,exports.getPolygonNotPolygon=bt,exports.getOuterRectangle=wt,exports.getGrid=At,exports.expandRecntagle=Pt,exports.expandRecntagleScale=Ot,exports.interpolateScaler=St,exports.interpolateVector=It,exports.solveQubicFomula=Ct,exports.clamp=jt,exports.circleClamp=Tt,exports.roundTrip=zt,exports.IDENTITY_AFFINE=exports.MINVALUE=void 0;var c=1e-6;exports.MINVALUE=c;var x=[1,0,0,1,0,0];function h(t,r){return{x:t,y:r}}function p(t,r){return h(t.x+r.x,t.y+r.y)}function l(t,r){return h(t.x-r.x,t.y-r.y)}function y(t,r){return h(t.x*r,t.y*r)}function v(t,r){var n=l(t,r);return Math.abs(n.x)<c&&Math.abs(n.y)<c}function g(t,r){return M(l(t,r))}function d(t){var r=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(t.length<2)return 0;for(var n=0,e=0;e<t.length-1;e++)n+=g(t[e],t[e+1]);return r&&(n+=g(t[t.length-1],t[0])),n}function M(t){return Math.sqrt(t.x*t.x+t.y*t.y)}function m(t){return M(t)<c}function b(t){var r=M(t);if(r<c)throw new Error("cannot get unit vector of zero vector");return y(t,1/r)}function w(t,r){return t.x*r.y-t.y*r.x}function A(t,r){return t.x*r.x+t.y*r.y}function P(t){return t.map(function(t){return Object.assign({},t)})}function O(t,r){return y(p(t,r),.5)}function S(t){return h(t.x+t.width/2,t.y+t.height/2)}function I(t){return 0===t.length?h(0,0):y(t.reduce(function(t,r){return p(t,r)},h(0,0)),1/t.length)}function E(t){var r=l(t,arguments.length>1&&void 0!==arguments[1]?arguments[1]:h(0,0));return Math.atan2(r.y,r.x)}function C(t){return p(y(l(arguments.length>1&&void 0!==arguments[1]?arguments[1]:h(0,0),t),2),t)}function L(t,r){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:h(0,0),e=l(t,n),o=Math.sin(r),i=Math.cos(r);return p(h(i*e.x-o*e.y,o*e.x+i*e.y),n)}function R(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:h(0,0),n=Math.sin(t),e=Math.cos(t);return function(t,o){var i=l(t,r);return p(o?h(e*i.x+n*i.y,-n*i.x+e*i.y):h(e*i.x-n*i.y,n*i.x+e*i.y),r)}}function q(t,r,n){if(qt(t))return qt(r)?[]:[-n/r];var e=r*r-4*t*n;if(e<0)return[];var o=.5/t;if(qt(e))return[-r*o];var i=Math.sqrt(e);return[(-r+i)*o,(-r-i)*o]}function j(t,r){if(2!==r.length)throw new Error("line must be length = 2");var n=r[0],e=l(r[1],n);return p(n,y(e,A(e,l(t,n))/A(e,e)))}function T(t,r,n,e,o){var i=o.x-e.x,u=o.y-e.y,a=t.x-2*r.x+n.x,f=2*(r.x-t.x),s=t.x,c=t.y-2*r.y+n.y,x=2*(r.y-t.y),h=t.y;return q(a*u-i*c,f*u-i*x,u*s-u*e.x-i*h+i*e.y)}function z(t,r,n,e,o){return T(t,r,n,e,o).filter(function(t){return 0<=t&&t<=1}).map(function(e){return h((n.x-2*r.x+t.x)*e*e+2*(r.x-t.x)*e+t.x,(n.y-2*r.y+t.y)*e*e+2*(r.y-t.y)*e+t.y)})}function B(t,r){var n=N(t,r),e=n.ta,o=n.tb;return n.tc*n.td<0&&e*o<0}function F(t,r){var n=N(t,r),e=n.ta,o=n.tb;return n.tc*n.td<=0&&e*o<=0}function N(t,r){var n=t[0].x,e=t[0].y,o=t[1].x,i=t[1].y,u=r[0].x,a=r[0].y,f=r[1].x,s=r[1].y;return{ta:(u-f)*(e-a)+(a-s)*(u-n),tb:(u-f)*(i-a)+(a-s)*(u-o),tc:(n-o)*(a-e)+(e-i)*(n-u),td:(n-o)*(s-e)+(e-i)*(n-f)}}function k(t,r){var n=w(t,r);return Math.abs(n)<c}function U(t,r){return m(l(t,j(t,r)))}function V(t,r){if(!m(l(t,j(t,r))))return!1;var n=l(r[1],r[0]),e=l(t,r[0]);return!(A(n,e)<0)&&!(M(n)<M(e))}function _(t,r){if(Math.abs(r[0].y-r[1].y)<c)return!1;var n,e;if(r[0].y<r[1].y){var i=o(r,2);e=i[0],n=i[1]}else{var u=o(r,2);n=u[0],e=u[1]}if(t.y<e.y||n.y<=t.y)return!1;var a=Y(r,[t,h(t.x+1,t.y)]);return!(!a||a.x<=t.x)}function D(t,r){if(r.find(function(r){return t.x===r.x&&t.y===r.y}))return!0;for(var n=r.map(function(t,n){return[t,n<r.length-1?r[n+1]:r[0]]}).filter(function(t){return!v(t[0],t[1])}),e=0;e<n.length;e++){var o=n[e];if(V(t,o))return!0}return n.filter(function(r){return _(t,r)}).length%2==1}function Y(t,r){if(k(l(t[0],t[1]),l(r[0],r[1])))return null;if(U(t[0],r))return Object.assign({},t[0]);if(U(t[1],r))return Object.assign({},t[1]);var n=((r[1].x-r[0].x)*(t[0].y-r[0].y)-(r[1].y-r[0].y)*(t[0].x-r[0].x))/2,e=n/(n+((r[1].x-r[0].x)*(r[0].y-t[1].y)-(r[1].y-r[0].y)*(r[0].x-t[1].x))/2);return 0<e&&e<1?h(t[0].x+(t[1].x-t[0].x)*e,t[0].y+(t[1].y-t[0].y)*e):null}function G(t,r){return!(!v(t[0],r[0])||!v(t[1],r[1]))||!(!v(t[0],r[1])||!v(t[1],r[0]))}function Q(r,n){var e=[],o=[],i=[];if(r.forEach(function(t,u){var a=Y([t,r[(u+1)%r.length]],n);e.push(t),a&&(e.push(a),o.push(u+1+o.length),i.push(a))}),o.length%2!=0)return[];var u=E(n[0],n[1]);i.sort(function(t,r){return L(t,-u).x-L(r,-u).x});for(var a=[],f=0;f<i.length-1;f+=2){for(var s=[i[f],i[f+1]],c=!1,x=0;x<r.length;x++)if(G(s,[r[x],r[(x+1)%r.length]])){c=!0;break}if(!c){a=s;break}}if(2!==a.length)return[];var p=i.concat(),l=p.indexOf(a[0]);-1!==l&&p.splice(l,1),-1!==(l=p.indexOf(a[1]))&&p.splice(l,1);var y=e.concat();p.forEach(function(t){var r=y.indexOf(t);y.splice(r,1)}),i=a;var v=(e=y).indexOf(i[0]),g=e.indexOf(i[1]);if(-1===v||-1===g)return[];(o=[])[0]=Math.min(v,g),o[1]=Math.max(v,g);for(var d=[],M=[],m=0;m<=o[0];m++)M.push(h(e[m].x,e[m].y));for(var b=o[1];b<e.length;b++)M.push(h(e[b].x,e[b].y));d.push(M),M=[];for(var w=o[0];w<=o[1];w++)M.push(h(e[w].x,e[w].y));d.push(M);var A=[];return d.forEach(function(r){var e=Q(r,n);0===e.length?A.push(r):A.push.apply(A,t(e))}),A}function W(t){for(var r=gt(t=$(t)),n=0,e=0,o=[];r.length>=3;){var i=r.concat();i.sort(function(t,r){return M(r)-M(t)}),n=r.indexOf(i[0]);var u=X(r,n);if(u)r.splice(n,1);else{var a=r.length;e=w(l(r[(n+1)%a],r[n]),l(r[n-1<0?a-1:n-1],r[n]));for(var f=n;!u;){if(w(l(r[((f=(f+1)%a)+1)%a],r[f]),l(r[f-1<0?a-1:f-1],r[f]))*e>0&&(u=X(r,f)),f===n)throw new Error("failed to split triangles")}r.splice(f,1)}o.push(u)}return o}function X(t,r){var n=t.length,e=t[r],o=t[(r+1)%n],i=t[r-1<0?n-1:r-1],u=[e,o,i],a=!1;return t.some(function(t){return t!==e&&t!==o&&t!==i&&Z(u,t)&&(a=!0),a}),a?null:u}function Z(t,r){var n=l(t[1],t[0]),e=l(t[2],t[1]),o=l(t[0],t[2]),i=l(r,t[0]),u=l(r,t[1]),a=l(r,t[2]),f=w(n,u),s=w(e,a),c=w(o,i);return f>=0&&s>=0&&c>=0||f<=0&&s<=0&&c<=0}function $(t){var r=t.concat();return-1===H(t)&&r.reverse(),r}function H(t){var r=J(t,!0);return r>0?1:r<0?-1:0}function J(t){var r=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(t.length<3)return 0;for(var n=0,e=t.length,o=0;o<e-1;o++)n+=(t[o].x-t[o+1].x)*(t[o].y+t[o+1].y);return n+=(t[e-1].x-t[0].x)*(t[e-1].y+t[0].y),n/=2,r||(n=Math.abs(n)),n}function K(t,r){var n=[],e=1/r;if(3===t.length)for(var o=0;o<=r;o++)n.push(tt(t,e*o));else{if(4!==t.length)throw new Error("connot approximate");for(var i=0;i<=r;i++)n.push(nt(t,e*i))}return n}function tt(t,r){var n=r,e=1-n,o=y(t[0],e*e),i=y(t[1],2*n*e),u=y(t[2],n*n);return h(o.x+i.x+u.x,o.y+i.y+u.y)}function rt(t){return function(r){return tt(t,r)}}function nt(t,r){var n=r,e=1-n,o=y(t[0],e*e*e),i=y(t[1],3*n*e*e),u=y(t[2],3*n*n*e),a=y(t[3],n*n*n);return h(o.x+i.x+u.x+a.x,o.y+i.y+u.y+a.y)}function et(t){return function(r){return nt(t,r)}}function ot(t,r){var n=o(t,4),e=n[0],i=n[1],u=n[2],a=n[3],f=Et(-e.x+3*i.x-3*u.x+a.x,3*e.x-6*i.x+3*u.x,-3*e.x+3*i.x,e.x-r),s=f*f,c=s*f,x=1-f,h=x*x;return h*x*e.y+3*f*h*i.y+3*s*x*u.y+c*a.y}function it(t,r,n,e,o,i,u){for(var a=[],f=(e-n)/u,s=R(i),c=0;c<=u;c++){var x=f*c+n-i;a.push(p(s(h(t*Math.cos(x),r*Math.sin(x))),o))}return a}function ut(t,r,n,e,o,i,u,a){return Math.abs(t*r)<c?[n,e]:st(at(t,r,n,e,o,i,u),a)}function at(t,r,n,e,o,i,u){if(Math.abs(t*r)<c)return function(t){return ft(f,s,t)};var a=R(u),f=n,s=e,x=a(h((f.x-s.x)/2,(f.y-s.y)/2),!0),l=x.x*x.x,v=x.y*x.y,g=l/t/t+v/r/r,d=g>1?Math.sqrt(g):1,M=h(Math.abs(t)*d,Math.abs(r)*d),m=M.x,b=M.y,w=m*m,A=b*b,P=y(y(h(m*x.y/b,-b*x.x/m),Math.sqrt(Math.max(0,w*A-w*v-A*l)/(w*v+A*l))),o===i?-1:1),O=p(a(P),y(p(f,s),.5)),S=h((x.x-P.x)/m,(x.y-P.y)/b),I=h((-x.x-P.x)/m,(-x.y-P.y)/b),C=E(S),L=(E(I)-E(S))%(2*Math.PI),q=!i&&0<L?L-2*Math.PI:i&&L<0?L+2*Math.PI:L;return function(t){if(0===t)return n;if(1===t)return e;var r=C+q*t;return p(a(h(m*Math.cos(r),b*Math.sin(r))),O)}}function ft(t,r,n){return p(t,y(l(r,t),n))}function st(t,r){if(r<=1)return[t(0),t(1)];for(var n=[],e=1/r,o=0;o<=r;o++)n.push(t(e*o));return n}function ct(t,r,n,e,o){t=L(t,-o),r=L(r,-o);var i=xt(h(t.x/n,t.y/e),h(r.x/n,r.y/e),1),u=i.centers,a=h(u[0].x*n,u[0].y*e),f=h(u[1].x*n,u[1].y*e);return{centers:[a=L(a,o),f=L(f,o)],radiusRate:i.radiusRate}}function xt(t,r,n){var e=(t.x+r.x)/2,o=(t.x-r.x)/2,i=(t.y+r.y)/2,u=(t.y-r.y)/2,a=Math.sqrt(o*o+u*u),f=Math.pow(n/a,2)-1;if(f<0){var s=O(t,r);return{centers:[s,s],radiusRate:a/n}}var c=Math.sqrt(f);return{centers:[h(e+u*c,i-o*c),h(e-u*c,i+o*c)],radiusRate:1}}function ht(t,r){var n=r[0],e=r[1],o=r[2],i=r[3],u=r[4],a=r[5];return t.map(function(t){return h(n*t.x+o*t.y+u,e*t.x+i*t.y+a)})}function pt(t){var r=o(t,6),n=r[0],e=r[1],i=r[2],u=r[3],a=r[4],f=r[5],s=n*u-e*i;return[u/s,-e/s,-i/s,n/s,(i*f-u*a)/s,-(n*f-e*a)/s]}function lt(t,r){return[t[0]*r[0]+t[2]*r[1],t[1]*r[0]+t[3]*r[1],t[0]*r[2]+t[2]*r[3],t[1]*r[2]+t[3]*r[3],t[0]*r[4]+t[2]*r[5]+t[4],t[1]*r[4]+t[3]*r[5]+t[5]]}function yt(t){return t.reduce(function(t,r){return lt(t,r)},x)}function vt(t,r){return h(t[0]*r.x+t[2]*r.y+t[4],t[1]*r.x+t[3]*r.y+t[5])}function gt(t){for(var r=t.concat(),n=t.length,e=0;e<n;e++){if(v(r[e],r[(e+1)%n])){r.splice(e,1),r=gt(r);break}}return r}function dt(t,r){var n=Math.PI/r;return Math.pow(t,2)*Math.sin(n)*Math.cos(n)*r}function Mt(t,r){var n=Math.PI/r,e=t/r;return Math.sqrt(e/Math.sin(n)/Math.cos(n))}function mt(t){var r=t.concat();r.sort(function(t,r){return J(r)-J(t)});var n={},e=[];return r.forEach(function(t,o){if(!n[o]){n[o]=!0;var i=[t].concat(r.filter(function(r,e){return!n[e]&&(r.filter(function(r){return D(r,t)}).length===r.length&&(n[e]=!0,!0))}));e.push(i)}}),e}function bt(t,r){for(var n=[],e=-1,o=[],i=[],u=0;u<t.length;u++){for(var a=[t[u],t[(u+1)%t.length]],f=0;f<r.length;f++){var s=[r[f],r[(f+1)%r.length]];if(B(a,s)){var c=Y(a,s);c&&(e=u,o.push(f),i.push(c))}}if(-1!==e)break}if(-1===e)return t;if(o.length%2!=0)return t;for(var x=i.map(function(r){return g(r,t[e])}),h=x.concat().sort(function(t,r){return t-r}),p=x.indexOf(h[0]),l=o[p],y=r.concat(),v=0;v<l;v++)y.push(y.shift());for(var d=o.map(function(t){return(t-l+r.length)%r.length}),M=i.concat(),m=0;m<p;m++)d.push(d.shift()),M.push(M.shift());for(var b=0;b<t.length;b++)n.push(t[(b+e+1)%t.length]);for(var w=0;w<d.length/2;w++){var A=d[2*w],P=d[2*w+1];n.push(M[2*w]);for(var O=A+1;O<=P;O++)n.push(y[O]);n.push(M[2*w+1])}return n}function wt(t){if(0===t.length)return{x:0,y:0,width:0,height:0};for(var r=1/0,n=1/0,e=-1/0,o=-1/0,i=0;i<t.length;i++)for(var u=t[i],a=0;a<u.length;a++){var f=u[a];r=Math.min(r,f.x),n=Math.min(n,f.y),e=Math.max(e,f.x),o=Math.max(o,f.y)}return{x:r,y:n,width:e-r,height:o-n}}function At(t,r){for(var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,e=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,o=[],i=t.x,u=t.x+t.width,a=t.y,f=t.y+t.height,s=i+n;s<u;)i<s&&s<u&&o.push([h(s,a),h(s,f)]),s+=r;for(var c=a+e;c<f;)a<c&&c<f&&o.push([h(i,c),h(u,c)]),c+=r;return o}function Pt(t,r,n){return{x:t.x-r/2,y:t.y-n/2,width:t.width+r,height:t.height+n}}function Ot(t,r,n){return Pt(t,t.width*(r-1),t.height*(n-1))}function St(t,r,n){return t*(1-n)+r*n}function It(t,r,n){return h(St(t.x,r.x,n),St(t.y,r.y,n))}function Et(t,r,n,e){var o=Ct(t,r,n,e);if(0===o.length)return 0;var i=Lt(o,0,1);if(void 0===i)throw new Error("Error: Cannot resolve uniquely in 0 <= t <= 1.");return Math.max(Math.min(i,1),0)}function Ct(t,r,n,e){if(qt(t))return q(r,n,e);var o=(3*t*n-r*r)/(3*t*t),i=(2*r*r*r-9*t*r*n+27*t*t*e)/(27*t*t*t),u=-r/(3*t);if(qt(o)&&qt(i))return[u];var a=(27*i*i+4*o*o*o)/108;if(qt(a)){var f=Math.sign(i)*Math.pow(Math.abs(i)/2,1/3);return[-2*f+u,f+u]}if(a>0){var s=Math.sqrt(a),c=-i/2+s,x=-i/2-s;return[Math.sign(c)*Math.pow(Math.abs(c),1/3)+Math.sign(x)*Math.pow(Math.abs(x),1/3)+u]}var h=-i/2,p=Math.sqrt(-a),l=Math.atan2(p,h),y=2*Math.pow(h*h+p*p,1/6);return[y*Math.cos(l/3)+u,y*Math.cos((l+2*Math.PI)/3)+u,y*Math.cos((l+4*Math.PI)/3)+u]}function Lt(t,r,n){return t.find(function(t){return r<=t&&t<=n||!(!Rt(t,r)&&!Rt(t,n))})}function Rt(t,r){return Math.abs(t-r)<c}function qt(t){return Math.abs(t)<c}function jt(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:-1/0,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1/0,n=arguments.length>2?arguments[2]:void 0;return Math.max(Math.min(n,r),t)}function Tt(t,r,n){return t===r?t:r<n?(n-r)%(r-t)+t:n<t?r-(t-n)%(r-t):n}function zt(t,r,n){var e=r-t,o=2*e;if(0===o)return t;var i=Math.abs(n-t)%o;return i<e?i+t:o-i+t}exports.IDENTITY_AFFINE=x;
},{}],"tzhc":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.draw=y,exports.fitRect=b,exports.parseSvgGraphicsStr=d,exports.parseSvgGraphics=A,exports.openCommandToD=I,exports.parseOpenPath=S,exports.parsePathSegmentRaws=T,exports.pathSegmentRawsToString=E,exports.pathSegmentRawToString=P,exports.parsePathSegments=w,exports.getPathLengthStructs=M,exports.getPathTotalLengthFromStructs=L,exports.getPathTotalLength=z,exports.getPathPointAtLengthFromStructs=D,exports.getPathPointAtLength=j,exports.reversePath=C,exports.slidePath=_,exports.scalePath=G,exports.rotatePath=B,exports.parsePathD=V,exports.parsePath=H,exports.parseRect=X,exports.parseEllipse=q,exports.parseCircle=Q,exports.adoptTransform=W,exports.splitD=R,exports.serializeSvgString=U,exports.serializeSvg=$,exports.serializePath=K,exports.serializePointList=ee,exports.createStyle=te,exports.parseTagStyle=re,exports.serializeStyle=ne,exports.splitPath=ae,exports.getGroupedPathList=ce,exports.affineToTransform=se,exports.parseTransform=oe,exports.parseTranslate=ue,exports.parseTranslateX=pe,exports.parseTranslateY=he,exports.parseSkewX=fe,exports.parseSkewY=ve,exports.parseScale=ge,exports.parseScaleX=me,exports.parseScaleY=ye,exports.parseRotate=be,exports.parseMatrix=de,exports.configs=void 0;var e=r(require("./geo"));function t(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return t=function(){return e},e}function r(e){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var r=t();if(r&&r.has(e))return r.get(e);var n={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var c in e)if(Object.prototype.hasOwnProperty.call(e,c)){var s=a?Object.getOwnPropertyDescriptor(e,c):null;s&&(s.get||s.set)?Object.defineProperty(n,c,s):n[c]=e[c]}return n.default=e,r&&r.set(e,n),n}function n(e,t){return f(e)||a(e,t)||u(e,t)||l()}function a(e,t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e)){var r=[],n=!0,a=!1,c=void 0;try{for(var s,o=e[Symbol.iterator]();!(n=(s=o.next()).done)&&(r.push(s.value),!t||r.length!==t);n=!0);}catch(i){a=!0,c=i}finally{try{n||null==o.return||o.return()}finally{if(a)throw c}}return r}}function c(e){return o(e)||h(e)||u(e)||s()}function s(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function o(e){if(Array.isArray(e))return p(e)}function i(e){return f(e)||h(e)||u(e)||l()}function l(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function u(e,t){if(e){if("string"==typeof e)return p(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?p(e,t):void 0}}function p(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function h(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}function f(e){if(Array.isArray(e))return e}var v="http://www.w3.org/2000/svg",g=function(e){return+e},m={bezierSplitSize:10,ellipseSplitSize:20};function y(e,t){e.lineCap=t.style.lineCap,e.lineJoin=t.style.lineJoin,e.beginPath(),t.d.forEach(function(t,r){0===r?e.moveTo(t.x,t.y):e.lineTo(t.x,t.y)}),e.closePath(),t.included&&t.included.forEach(function(t){t.forEach(function(t,r){0===r?e.moveTo(t.x,t.y):e.lineTo(t.x,t.y)}),e.closePath()}),t.style.fill&&(e.fillStyle=t.style.fillStyle,e.globalAlpha=t.style.fillGlobalAlpha,e.fill()),t.style.stroke&&(e.strokeStyle=t.style.strokeStyle,e.globalAlpha=t.style.strokeGlobalAlpha,e.lineWidth=t.style.lineWidth,e.setLineDash(t.style.lineDash),e.stroke()),e.globalAlpha=1}function b(t,r,n,a,c){var s=1/0,o=-1/0,i=1/0,l=-1/0;t.forEach(function(e){e.d.forEach(function(e){s=Math.min(s,e.x),o=Math.max(o,e.x),i=Math.min(i,e.y),l=Math.max(l,e.y)})});var u=t.map(function(t){return Object.assign(Object.assign({},t),{d:t.d.map(function(t){return e.vec(t.x-s,t.y-i)})})}),p=o-s,h=l-i,f=a/p,v=c/h,g=Math.min(f,v),m=u.map(function(t){return Object.assign(Object.assign({},t),{d:t.d.map(function(t){return e.vec(t.x*g,t.y*g)})})}),y=r+(a-p*g)/2,b=n+(c-h*g)/2;return m.map(function(t){return Object.assign(Object.assign({},t),{d:t.d.map(function(t){return e.vec(t.x+y,t.y+b)}),included:(t.included||[]).map(function(t){return t.map(function(t){return e.vec((t.x-s)*g+y,(t.y-i)*g+b)})})})})}function d(e){var t=(new DOMParser).parseFromString(e,"image/svg+xml").getElementsByTagName("svg");return t&&0!==t.length?A(t[0]):[]}function x(t,r){var n,a,c=Object.assign(Object.assign({},null!==(n=null==r?void 0:r.style)&&void 0!==n?n:{}),re(t)),s=t.getAttribute("transform"),o=null!==(a=null==r?void 0:r.transform)&&void 0!==a?a:e.IDENTITY_AFFINE,i=[],l=k(t);if(l&&i.push(Object.assign(Object.assign({},l),{d:l.d.map(function(t){return e.applyAffine(o,t)})})),t.children.length>0){var u=s?e.multiAffine(o,oe(s)):o;Array.from(t.children).forEach(function(e){i=i.concat(x(e,{style:c,transform:u}))})}return i}function k(e){switch(e.tagName.toLowerCase()){case"path":return{d:H(e),style:re(e)};case"rect":return{d:X(e),style:re(e)};case"ellipse":return{d:q(e),style:re(e)};case"circle":return{d:Q(e),style:re(e)};default:return}}function A(e){return x(e)}function I(e){var t=e.type;return"x1"in e&&(t+=" ".concat(e.x1)),"y1"in e&&(t+=" ".concat(e.y1)),"x2"in e&&(t+=" ".concat(e.x2)),"y2"in e&&(t+=" ".concat(e.y2)),"x3"in e&&(t+=" ".concat(e.x3)),"y3"in e&&(t+=" ".concat(e.y3)),"x"in e&&(t+=" ".concat(e.x)),"y"in e&&(t+=" ".concat(e.y)),t}function S(e){var t=[],r="";return e.commands.forEach(function(e){if((r+=I(e)+" ")&&"Z"===e.type.toUpperCase()){var n=V(r);t.push({d:n,style:Object.assign(Object.assign({},te()),{fill:!0,fillStyle:"black",stroke:!1})}),r=""}}),t}function F(e){if(8===e.length)return[e[0],g(e[1]),g(e[2]),g(e[3]),"0"!==e[4],"0"!==e[5],g(e[6]),g(e[7])];var t=i(e),r=t[0],n=t.slice(1);return[r].concat(c(n.map(g)))}function T(e){return R(e).map(function(e){return F(e)})}function E(e){return e.map(P).join(" ")}function P(e){return e.map(function(e){return!0===e?"1":!1===e?"0":e.toString()}).join(" ")}function w(e){return N(T(e))}function N(t){var r=[],n=e.vec(0,0),a=n,c=n,s=1;return t.forEach(function(t){switch(t[0]){case"M":var o=e.vec(t[1],t[2]);r.push({command:"M",segment:[o,o]}),n=o,c=o,s=1,a=o;break;case"m":var i=e.vec(t[1],t[2]);r.push({command:"m",segment:[i,i]}),n=i,a=i,c=i,s=1;break;case"L":var l=a,u=e.vec(t[1],t[2]);r.push({command:"L",segment:[l,u]}),null!=n||(n=u),c=u,s=1,a=u;break;case"l":var p=a,h=e.add(a,e.vec(t[1],t[2]));r.push({command:"l",segment:[p,h]}),null!=n||(n=h),c=h,s=1,a=h;break;case"H":var f=a,v=e.vec(t[1],f.y);r.push({command:"H",segment:[f,v]}),c=v,s=1,a=v;break;case"h":var g=a,m=e.vec(t[1]+g.x,g.y);r.push({command:"h",segment:[g,m]}),c=m,s=1,a=m;break;case"V":var y=a,b=e.vec(y.x,t[1]);r.push({command:"V",segment:[y,b]}),c=b,s=1,a=b;break;case"v":var d=a,x=e.vec(d.x,t[1]+d.y);r.push({command:"v",segment:[d,x]}),c=x,s=1,a=x;break;case"Q":var k=a,A=e.vec(t[1],t[2]),I=e.vec(t[3],t[4]);r.push({command:"Q",lerpFn:e.getBezier2LerpFn([k,A,I]),curve:!0}),c=A,s=2,a=I;break;case"q":var S=a,F=e.add(S,e.vec(t[1],t[2])),T=e.add(S,e.vec(t[3],t[4]));r.push({command:"q",lerpFn:e.getBezier2LerpFn([S,F,T]),curve:!0}),c=F,s=2,a=T;break;case"T":var E=a,P=2===s?e.getSymmetry(c,E):E,w=e.vec(t[1],t[2]);r.push({command:"T",lerpFn:e.getBezier2LerpFn([E,P,w]),curve:!0}),c=P,s=2,a=w;break;case"t":var N=a,M=2===s?e.getSymmetry(c,N):N,L=e.add(N,e.vec(t[1],t[2]));r.push({command:"t",lerpFn:e.getBezier2LerpFn([N,M,L]),curve:!0}),c=M,s=2,a=L;break;case"C":var z=a,D=e.vec(t[1],t[2]),j=e.vec(t[3],t[4]),Y=e.vec(t[5],t[6]);r.push({command:"C",lerpFn:e.getBezier3LerpFn([z,D,j,Y]),curve:!0}),c=j,s=3,a=Y;break;case"c":var O=a,C=e.add(O,e.vec(t[1],t[2])),_=e.add(O,e.vec(t[3],t[4])),G=e.add(O,e.vec(t[5],t[6]));r.push({command:"c",lerpFn:e.getBezier3LerpFn([O,C,_,G]),curve:!0}),c=_,s=3,a=G;break;case"S":var Z=a,B=3===s?e.getSymmetry(c,Z):Z,V=e.vec(t[1],t[2]),H=e.vec(t[3],t[4]);r.push({command:"S",lerpFn:e.getBezier3LerpFn([Z,B,V,H]),curve:!0}),c=V,s=3,a=H;break;case"s":var X=a,q=3===s?e.getSymmetry(c,X):X,Q=e.add(X,e.vec(t[1],t[2])),W=e.add(X,e.vec(t[3],t[4]));r.push({command:"s",lerpFn:e.getBezier3LerpFn([X,q,Q,W]),curve:!0}),c=Q,s=3,a=W;break;case"A":var J=a,R=t[1],U=t[2],$=t[4],K=t[5],ee=t[3]/180*Math.PI,te=e.vec(t[6],t[7]);r.push({command:"A",lerpFn:e.getArcLerpFn(R,U,J,te,$,K,ee),curve:!0}),c=te,s=1,a=te;break;case"a":var re=a,ne=t[1],ae=t[2],ce=t[4],se=t[5],oe=t[3]/180*Math.PI,ie=e.add(re,e.vec(t[6],t[7]));r.push({command:"a",lerpFn:e.getArcLerpFn(ne,ae,re,ie,ce,se,oe),curve:!0}),c=ie,s=1,a=ie;break;case"Z":case"z":var le=a,ue=n;r.push({command:t[0],segment:[le,ue]}),c=ue,s=1,a=ue}}),r}function M(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:m.bezierSplitSize;return w(t).map(function(t){return{lerpFn:t.curve?t.lerpFn:function(r){return e.lerpPoint(t.segment[0],t.segment[1],r)},length:e.getPolylineLength(t.curve?e.getApproPoints(t.lerpFn,r):t.segment)}})}function L(e){return e.reduce(function(e,t){return e+t.length},0)}function z(e){return L(M(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:m.bezierSplitSize))}function D(t,r){for(var n=Math.max(r,0),a=0;a<t.length;a++){var c=t[a];if(n<c.length)return c.lerpFn(n/c.length);n-=c.length}return t.length>0?t[t.length-1].lerpFn(1):e.vec(0,0)}function j(e,t){return D(M(e,arguments.length>2&&void 0!==arguments[2]?arguments[2]:m.bezierSplitSize),t)}function Y(t){for(var r,n=[],a=[],c=e.vec(0,0),s=c,o=c,i=1,l=0;l<t.length;l++){switch((r=t[l])[0]){case"M":c=s=o=e.vec(r[1],r[2]),i=1;break;case"m":c=s=o=e.add(e.vec(r[1],r[2]),s),i=1;break;case"L":var u=e.vec(r[1],r[2]);null!=c||(c=u),s=o=u,i=1;break;case"l":var p=e.add(e.vec(r[1],r[2]),s);null!=c||(c=p),s=o=p,i=1;break;case"H":s=o=e.vec(r[1],s.y),i=1;break;case"h":s=o=e.vec(r[1]+s.x,s.y),i=1;break;case"V":s=o=e.vec(s.x,r[1]),i=1;break;case"v":s=o=e.vec(s.x,r[1]+s.y),i=1;break;case"Q":o=e.vec(r[1],r[2]),s=e.vec(r[3],r[4]),i=2;break;case"q":o=e.vec(r[1]+s.x,r[2]+s.y),s=e.vec(r[3]+s.x,r[4]+s.y),i=2;break;case"T":o=2===i?e.lerpPoint(o,s,2):s,s=e.vec(r[1],r[2]),i=2;break;case"t":o=2===i?e.lerpPoint(o,s,2):s,s=e.vec(r[1]+s.x,r[2]+s.y),i=2;break;case"C":o=e.vec(r[3],r[4]),s=e.vec(r[5],r[6]),i=3;break;case"c":o=e.vec(r[3]+s.x,r[4]+s.y),s=e.vec(r[5]+s.x,r[6]+s.y),i=3;break;case"S":o=3===i?e.lerpPoint(o,s,2):s,s=e.vec(r[3],r[4]),i=3;break;case"s":o=3===i?e.lerpPoint(o,s,2):s,s=e.vec(r[3]+s.x,r[4]+s.y),i=3;break;case"A":s=o=e.vec(r[6],r[7]),i=1;break;case"a":s=o=e.vec(r[6]+s.x,r[7]+s.y),i=1;break;case"Z":case"z":s=o=c,i=1;break;default:throw xe()}a.push(o),n.push(s)}return{points:n,controls:a}}function O(e){return/Q|q|T|t|C|c|S|s|A|a/.test(e)}function C(e){if(e.length<2)return e;for(var t,r,n=[],a=Y(e),c=a.points,s=a.controls,o=e.length,i=!1,l=o-1;0<=l;l--)switch(t=e[l],r=c[0===l?o-1:l-1],t[0]){case"M":i&&(O(n[n.length-1][0])?n.push(["Z"]):n[n.length-1]=["Z"],i=!1),n.push([t[0],r.x,r.y]);break;case"m":i&&(O(n[n.length-1][0])?n.push(["z"]):n[n.length-1]=["z"],i=!1),0===l?n.push(["M",r.x,r.y]):n.push([t[0],-t[1],-t[2]]);break;case"L":i&&0===l&&(O(n[n.length-1][0])?n.push(["Z"]):n[n.length-1]=["Z"],i=!1),n.push([t[0],r.x,r.y]);break;case"l":i&&0===l&&(O(n[n.length-1][0])?n.push(["z"]):n[n.length-1]=["z"],i=!1),0===l?n.push(["L",r.x,r.y]):n.push([t[0],-t[1],-t[2]]);break;case"H":n.push([t[0],r.x]);break;case"h":n.push([t[0],-t[1]]);break;case"V":n.push([t[0],r.y]);break;case"v":n.push([t[0],-t[1]]);break;case"Q":n.push([t[0],t[1],t[2],r.x,r.y]);break;case"q":n.push([t[0],t[1]-t[3],t[2]-t[4],-t[3],-t[4]]);break;case"T":var u=s[l];n.push(["Q",u.x,u.y,r.x,r.y]);break;case"t":var p=c[l],h=s[l];n.push(["q",h.x-p.x,h.y-p.y,-t[1],-t[2]]);break;case"C":n.push([t[0],t[3],t[4],t[1],t[2],r.x,r.y]);break;case"c":n.push([t[0],t[3]-t[5],t[4]-t[6],t[1]-t[5],t[2]-t[6],-t[5],-t[6]]);break;case"S":var f=s[l];n.push(["C",t[1],t[2],f.x,f.y,r.x,r.y]);break;case"s":var v=c[l],g=s[l];n.push(["c",t[1]-t[3],t[2]-t[4],g.x-v.x,g.y-v.y,-t[3],-t[4]]);break;case"A":n.push([t[0],t[1],t[2],t[3],t[4],!t[5],r.x,r.y]);break;case"a":n.push([t[0],t[1],t[2],t[3],t[4],!t[5],-t[6],-t[7]]);break;case"Z":i=!0,n.push(["L",r.x,r.y]);break;case"z":i=!0;var m=c[l];n.push(["l",r.x-m.x,r.y-m.y])}return n.unshift(n.pop()),n}function _(e,t){return e.map(function(e){var r=c(e);switch(r[0]){case"H":r[1]+=t.x;break;case"V":r[1]+=t.y;break;case"A":r[6]+=t.x,r[7]+=t.y;break;default:if(r[0]===r[0].toUpperCase())for(var n=1;n<r.length-1;n+=2)r[n]+=t.x,r[n+1]+=t.y}return r})}function G(e,t){return e.map(function(e){var r=c(e);switch(r[0]){case"H":case"h":r[1]*=t.x;break;case"V":case"v":r[1]*=t.y;break;case"A":case"a":r[1]*=Math.abs(t.x),r[2]*=Math.abs(t.y),t.x*t.y<0&&(r[5]=!r[5]),r[6]*=t.x,r[7]*=t.y;break;default:for(var n=1;n<r.length-1;n+=2)r[n]*=t.x,r[n+1]*=t.y}return r})}function Z(e){var t=Y(e.some(function(e){return/H|V/.test(e[0])})?e:[]).points;return e.map(function(e,r){switch(e[0]){case"H":return["L",e[1],t[r].y];case"h":return["l",e[1],0];case"V":return["L",t[r].x,e[1]];case"v":return["l",0,e[1]];default:return e}})}function B(e,t){var r=Math.sin(t),n=Math.cos(t);return Z(e).map(function(e){var a=c(e);switch(a[0]){case"A":case"a":a[3]+=180*t/Math.PI;var s=a[6],o=a[7];a[6]=n*s-r*o,a[7]=r*s+n*o;break;default:for(var i=1;i<a.length-1;i+=2){var l=a[i],u=a[i+1];a[i]=n*l-r*u,a[i+1]=r*l+n*u}}return a})}function V(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:m.bezierSplitSize,r=Math.max(1,t),n=[],a=1/r;return w(e).forEach(function(e){if("Z"!==e.command&&"z"!==e.command)if(e.curve)for(var t=1;t<=r;t++)n.push(e.lerpFn(a*t));else n.push(e.segment[1])}),n}function H(e){var t=e.getAttribute("d");return t?W(e.getAttribute("transform"),V(t)):[]}function X(t){var r=g(t.getAttribute("x")||"0"),n=g(t.getAttribute("y")||"0"),a=g(t.getAttribute("width")||"0"),c=g(t.getAttribute("height")||"0");return W(t.getAttribute("transform"),[e.vec(r,n),e.vec(r+a,n),e.vec(r+a,n+c),e.vec(r,n+c)])}function q(t){var r=g(t.getAttribute("cx")||"0"),n=g(t.getAttribute("cy")||"0"),a=g(t.getAttribute("rx")||"1"),c=g(t.getAttribute("ry")||"1");return W(t.getAttribute("transform"),e.approximateArc(a,c,0,2*Math.PI,e.vec(r,n),0,m.ellipseSplitSize))}function Q(t){var r=g(t.getAttribute("cx")||"0"),n=g(t.getAttribute("cy")||"0"),a=g(t.getAttribute("r")||"1");return W(t.getAttribute("transform"),e.approximateArc(a,a,0,2*Math.PI,e.vec(r,n),0,m.ellipseSplitSize))}function W(t,r){if(!t)return r;var n=e.cloneVectors(r);return t.split(/\)/).forEach(function(t){var r=t.split(/\(/);if(2===r.length){var a=r[0].trim().toLowerCase(),c=le(r[1]);switch(a){case"matrix":n=e.transform(n,c);break;case"translate":n=n.map(function(t){return e.vec(t.x+c[0],t.y+c[1])});break;case"scale":var s=c[0],o=c[0];c.length>1&&(o=c[1]),n=n.map(function(t){return e.vec(t.x*s,t.y*o)});break;case"rotate":var i=e.vec(0,0);c.length>2&&(i=e.vec(c[1],c[2])),n=n.map(function(t){return e.rotate(t,c[0]*Math.PI/180,i)});break;case"skewx":n=n.map(function(t){return e.vec(t.x+Math.tan(c[0]*Math.PI/180)*t.y,t.y)});break;case"skewy":n=n.map(function(t){return e.vec(t.x,t.y+Math.tan(c[0]*Math.PI/180)*t.x)})}}}),n}exports.configs=m;var J=/M|m|L|l|H|h|V|v|C|c|S|s|Q|q|T|t|A|a|Z|z/g;function R(e){for(var t=e.replace(J," $& ").replace(/([^e])(-\d(\d*\.?)\d*)/g,"$1 $2 ").split(/,| /).filter(function(e){return e}),r="M",n=[],a=0;a<t.length;){var c=[];switch(t[a].match(J)?(c.push(t[a]),r=c[0],a++):"Z"!==r.toUpperCase()&&c.push(r),c[0].toUpperCase()){case"Z":break;case"V":case"H":c.push(t[a]),a+=1;break;case"M":case"L":case"T":c.push(t[a],t[a+1]),a+=2;break;case"Q":case"S":c.push(t[a],t[a+1],t[a+2],t[a+3]),a+=4;break;case"C":c.push(t[a],t[a+1],t[a+2],t[a+3],t[a+4],t[a+5]),a+=6;break;case"A":c.push(t[a],t[a+1],t[a+2],t[a+3],t[a+4],t[a+5],t[a+6]),a+=7;break;default:throw xe()}n.push(c)}return n}function U(e){var t=$(e);return(new XMLSerializer).serializeToString(t)}function $(e){var t=document.createElementNS(v,"svg"),r=1,n=1;return e.forEach(function(e){t.appendChild(K(e.d,e.style)),e.d.forEach(function(e){r=Math.max(r,e.x),n=Math.max(n,e.y)})}),r*=1.1,n*=1.1,t.setAttribute("width","".concat(r)),t.setAttribute("height","".concat(n)),t}function K(e,t){var r=document.createElementNS(v,"path");return r.setAttribute("d",ee(e)),r.setAttribute("style",ne(t)),r}function ee(e,t){if(0===e.length)return"";var r=i(e),n=r[0],a=r.slice(1);return"M ".concat(n.x,",").concat(n.y)+a.map(function(e){return" L ".concat(e.x,",").concat(e.y)}).join("")+(t?"":" Z")}function te(){return{fill:!1,fillGlobalAlpha:1,fillStyle:"",lineCap:"butt",lineDash:[],lineJoin:"bevel",lineWidth:1,stroke:!1,strokeGlobalAlpha:1,strokeStyle:""}}function re(e){var t={};e.getAttributeNames().forEach(function(r){var n=e.getAttributeNode(r);n&&(t[n.name]=n.value)});var r=e.getAttributeNode("style");r&&r.value.split(";").forEach(function(e){var r=e.split(":");2===r.length&&(t[r[0].trim()]=r[1].trim())});return Object.entries(t).reduce(function(e,t){var r=n(t,2),a=r[0],c=r[1];switch(a.toLowerCase()){case"fill":"none"===c?(e.fillStyle="",e.fill=!1):(e.fillStyle=c,e.fill=!0);break;case"stroke":"none"===c?(e.strokeStyle="",e.stroke=!1):(e.strokeStyle=c,e.stroke=!0);break;case"stroke-width":e.lineWidth=g(c);break;case"stroke-opacity":e.strokeGlobalAlpha=g(c);break;case"fill-opacity":e.fillGlobalAlpha=g(c);break;case"stroke-linecap":e.lineCap=c;break;case"stroke-linejoin":e.lineJoin=c;break;case"stroke-dasharray":"none"===c.toLowerCase()?e.lineDash=[]:e.lineDash=le(c)}return e},te())}function ne(e){var t="";return e.fill?t+="fill:"+e.fillStyle+";":t+="fill:none;",e.fillGlobalAlpha&&(t+="fill-opacity:"+e.fillGlobalAlpha+";"),e.stroke?t+="stroke:"+e.strokeStyle+";":t+="stroke:none;",e.lineWidth&&(t+="stroke-width:"+e.lineWidth+";"),e.strokeGlobalAlpha&&(t+="stroke-opacity:"+e.strokeGlobalAlpha+";"),e.lineCap&&(t+="stroke-linecap:"+e.lineCap+";"),e.lineJoin&&(t+="stroke-linejoin:"+e.lineJoin+";"),e.lineDash&&(e.lineDash.length>0?t+="stroke-dasharray:"+e.lineDash.join(",")+";":t+="stroke-dasharray:none;"),t}function ae(t,r){var n=e.splitPolyByLine(t.d,r);if(n.length<2)return[t];var a=e.getLoopwise(t.d),s=[],o=[];t.included&&t.included.forEach(function(t){e.getLoopwise(t)===a?s.push(t):o.push(t)}),s.forEach(function(t){var a=e.splitPolyByLine(t,r);n=[].concat(c(n),c(a.length>0?a:[t]))});var l=[];o.forEach(function(t){e.splitPolyByLine(t,r).length>0?l.push(t):n.push(t)});var u=n.map(function(t){return l.reduce(function(t,r){return e.getPolygonNotPolygon(t,r)},t)});return e.getIncludedPolygonGroups(u).map(function(e){var r=i(e);return{d:r[0],included:r.slice(1),style:t.style}})}function ce(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:te();return e.getIncludedPolygonGroups(t).map(function(e){var t=i(e);return{d:t[0],included:t.slice(1),style:r}})}function se(e){return"matrix(".concat(e.join(","),")")}function oe(t){var r=t.split(")").map(function(e){return"".concat(e,")")}).map(function(e){return ie(e)});return e.multiAffines(r)}function ie(t){return/translateX/.test(t)?pe(t):/translateY/.test(t)?he(t):/translate/.test(t)?ue(t):/skewX/.test(t)?fe(t):/skewY/.test(t)?ve(t):/scaleX/.test(t)?me(t):/scaleY/.test(t)?ye(t):/scale/.test(t)?ge(t):/rotate/.test(t)?be(t):/matrix/.test(t)?de(t):c(e.IDENTITY_AFFINE)}function le(e){return e.trim().replace(/,/g," ").split(/ +/).map(function(e){return g(e)})}function ue(t){var r=t.match(/translate\((.+)\)/);if(!r||r.length<1)return c(e.IDENTITY_AFFINE);var n=le(r[1]);return n.length<1?c(e.IDENTITY_AFFINE):1===n.length?[1,0,0,1,n[0],0]:[1,0,0,1,n[0],n[1]]}function pe(t){var r=t.match(/translateX\((.+)\)/);if(!r||r.length<1)return c(e.IDENTITY_AFFINE);var n=le(r[1]);return n.length<1?c(e.IDENTITY_AFFINE):[1,0,0,1,n[0],0]}function he(t){var r=t.match(/translateY\((.+)\)/);if(!r||r.length<1)return c(e.IDENTITY_AFFINE);var n=le(r[1]);return n.length<1?c(e.IDENTITY_AFFINE):[1,0,0,1,0,n[0]]}function fe(t){var r=t.match(/skewX\((.+)\)/);if(!r||r.length<1)return c(e.IDENTITY_AFFINE);var n=le(r[1]);return n.length<1?c(e.IDENTITY_AFFINE):[1,0,Math.tan(n[0]*Math.PI/180),1,0,0]}function ve(t){var r=t.match(/skewY\((.+)\)/);if(!r||r.length<1)return c(e.IDENTITY_AFFINE);var n=le(r[1]);return n.length<1?c(e.IDENTITY_AFFINE):[1,Math.tan(n[0]*Math.PI/180),0,1,0,0]}function ge(t){var r=t.match(/scale\((.+)\)/);if(!r||r.length<2)return c(e.IDENTITY_AFFINE);var n=le(r[1]);return n.length<1?c(e.IDENTITY_AFFINE):1===n.length?[n[0],0,0,n[0],0,0]:[n[0],0,0,n[1],0,0]}function me(t){var r=t.match(/scaleX\((.+)\)/);if(!r||r.length<1)return c(e.IDENTITY_AFFINE);var n=le(r[1]);return n.length<1?c(e.IDENTITY_AFFINE):[n[0],0,0,1,0,0]}function ye(t){var r=t.match(/scaleY\((.+)\)/);if(!r||r.length<1)return c(e.IDENTITY_AFFINE);var n=le(r[1]);return n.length<1?c(e.IDENTITY_AFFINE):[1,0,0,n[0],0,0]}function be(t){var r=t.match(/rotate\((.+)\)/);if(!r||r.length<2)return c(e.IDENTITY_AFFINE);var n=le(r[1]);if(le.length<1)return c(e.IDENTITY_AFFINE);var a=n[0]/180*Math.PI,s=Math.cos(a),o=Math.sin(a),i=[s,o,-o,s,0,0];return n.length>2?e.multiAffine(e.multiAffine([1,0,0,1,n[1],n[2]],i),[1,0,0,1,-n[1],-n[2]]):i}function de(t){var r=t.match(/matrix\((.+)\)/);if(!r||r.length<2)return c(e.IDENTITY_AFFINE);var n=le(r[1]);return n.length<5?c(e.IDENTITY_AFFINE):n.slice(0,6)}function xe(){return new Error("Unexpected error")}
},{"./geo":"WBaa"}],"ZCfc":[function(require,module,exports) {
"use strict";var t=r(require("../src/geo")),e=r(require("../src/svg"));function n(){if("function"!=typeof WeakMap)return null;var t=new WeakMap;return n=function(){return t},t}function r(t){if(t&&t.__esModule)return t;if(null===t||"object"!=typeof t&&"function"!=typeof t)return{default:t};var e=n();if(e&&e.has(t))return e.get(t);var r={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var d in t)if(Object.prototype.hasOwnProperty.call(t,d)){var i=a?Object.getOwnPropertyDescriptor(t,d):null;i&&(i.get||i.set)?Object.defineProperty(r,d,i):r[d]=t[d]}return r.default=t,e&&e.set(t,r),r}var a=document.getElementById("canvas"),d=a.getContext("2d"),i=document.getElementById("input");function o(){var t=document.getElementById("input-path").value;document.getElementById("reverse-result").value=e.pathSegmentRawsToString(e.reversePath(e.parsePathSegmentRaws(t))),document.getElementById("path-src").setAttribute("d",t),document.getElementById("path-dist").setAttribute("d",e.pathSegmentRawsToString(e.reversePath(e.parsePathSegmentRaws(t))))}function s(){var t=document.getElementById("input-path2").value;document.getElementById("path-src2").setAttribute("d",t);var n=e.parsePathSegmentRaws(t);document.getElementById("path-dist2").setAttribute("d",e.pathSegmentRawsToString(e.slidePath(n,{x:30,y:30}))),document.getElementById("path-dist3").setAttribute("d",e.pathSegmentRawsToString(e.scalePath(n,{x:-1,y:1}))),document.getElementById("path-dist4").setAttribute("d",e.pathSegmentRawsToString(e.scalePath(n,{x:1,y:-1}))),document.getElementById("path-dist5").setAttribute("d",e.pathSegmentRawsToString(e.scalePath(n,{x:-1,y:-1})))}function u(){var t=document.getElementById("input-rotate").value;document.getElementById("rotate-src2").setAttribute("d",t);var n=e.parsePathSegmentRaws(t);document.getElementById("rotate-dist2").setAttribute("d",e.pathSegmentRawsToString(e.rotatePath(n,2*Math.PI/5))),document.getElementById("rotate-dist3").setAttribute("d",e.pathSegmentRawsToString(e.rotatePath(n,2*Math.PI*2/5))),document.getElementById("rotate-dist4").setAttribute("d",e.pathSegmentRawsToString(e.rotatePath(n,3*Math.PI*2/5))),document.getElementById("rotate-dist5").setAttribute("d",e.pathSegmentRawsToString(e.rotatePath(n,4*Math.PI*2/5)))}i.onchange=function(n){var r=n.target.files;if(r&&0!==r.length){var i=new FileReader;i.readAsText(r[0]),i.onload=function(){if(d){d.clearRect(0,0,a.width,a.height);var n=e.parseSvgGraphicsStr(i.result);e.fitRect(n,0,0,a.width,a.height).forEach(function(n){t.triangleSplit(n.d).forEach(function(t){e.draw(d,{d:t,style:n.style})})})}}}},o(),document.getElementById("run-reverse").addEventListener("click",o),s(),document.getElementById("run-modify").addEventListener("click",s),u(),document.getElementById("run-rotate").addEventListener("click",u);
},{"../src/geo":"WBaa","../src/svg":"tzhc"}]},{},["ZCfc"], null)
//# sourceMappingURL=main.45349efb.js.map